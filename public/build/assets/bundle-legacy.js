System.register(["./dashboard-init-legacy.js","./tab-legacy.js","./_commonjsHelpers-legacy.js","./Modal-legacy.js"],(function(e,t){"use strict";var i,n,s,o,a,r,l,h;return{setters:[null,e=>{i=e.r,n=e.a,s=e.b,o=e.c,a=e.d,r=e.e},e=>{l=e.g},e=>{h=e.M}],execute:function(){var c,d={exports:{}},u={exports:{}};function m(){return c||(c=1,function(e){e.exports=function(e,t,i){const n="backdrop",s="fade",o="show",a=`mousedown.bs.${n}`,r={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},l={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class h extends t{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return r}static get DefaultType(){return l}static get NAME(){return n}show(e){if(!this._config.isVisible)return void i.execute(e);this._append();const t=this._getElement();this._config.isAnimated&&i.reflow(t),t.classList.add(o),this._emulateAnimation((()=>{i.execute(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(o),this._emulateAnimation((()=>{this.dispose(),i.execute(e)}))):i.execute(e)}dispose(){this._isAppended&&(e.off(this._element,a),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(s),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=i.getElement(e.rootElement),e}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),e.on(t,a,(()=>{i.execute(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){i.executeAfterTransition(e,this._getElement(),this._config.isAnimated)}}return h}(i(),n(),s())}(u)),u.exports}var p,f={exports:{}};
/*!
        * Bootstrap component-functions.js v5.3.5 (https://getbootstrap.com/)
        * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
        * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
        */function g(){return p||(p=1,function(e,t){!function(e,t,i,n){const s=(e,s="hide")=>{const o=`click.dismiss${e.EVENT_KEY}`,a=e.NAME;t.on(document,o,`[data-bs-dismiss="${a}"]`,(function(t){if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),n.isDisabled(this))return;const o=i.getElementFromSelector(this)||this.closest(`.${a}`);e.getOrCreateInstance(o)[s]()}))};e.enableDismissTrigger=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}(t,i(),o(),s())}(0,f.exports)),f.exports}var v,w={exports:{}};
/*!
        * Bootstrap focustrap.js v5.3.5 (https://getbootstrap.com/)
        * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
        * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
        */function _(){return v||(v=1,function(e){e.exports=function(e,t,i){const n="focustrap",s=".bs.focustrap",o=`focusin${s}`,a=`keydown.tab${s}`,r="Tab",l="forward",h="backward",c={autofocus:!0,trapElement:null},d={autofocus:"boolean",trapElement:"element"};class u extends i{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return c}static get DefaultType(){return d}static get NAME(){return n}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),e.off(document,s),e.on(document,o,(e=>this._handleFocusin(e))),e.on(document,a,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,e.off(document,s))}_handleFocusin(e){const{trapElement:i}=this._config;if(e.target===document||e.target===i||i.contains(e.target))return;const n=t.focusableChildren(i);0===n.length?i.focus():this._lastTabNavDirection===h?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){e.key===r&&(this._lastTabNavDirection=e.shiftKey?h:l)}}return u}(i(),o(),n())}(w)),w.exports}var b,y,x={exports:{}};
/*!
        * Bootstrap scrollbar.js v5.3.5 (https://getbootstrap.com/)
        * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
        * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
        */function E(){return b||(b=1,function(e){e.exports=function(e,t,i){const n=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",s=".sticky-top",o="padding-right",a="margin-right";class r{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,o,(t=>t+e)),this._setElementAttributes(n,o,(t=>t+e)),this._setElementAttributes(s,a,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,o),this._resetElementAttributes(n,o),this._resetElementAttributes(s,a)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const n=this.getWidth(),s=e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+n)return;this._saveInitialAttribute(e,t);const s=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${i(Number.parseFloat(s))}px`)};this._applyManipulationCallback(e,s)}_saveInitialAttribute(t,i){const n=t.style.getPropertyValue(i);n&&e.setDataAttribute(t,i,n)}_resetElementAttributes(t,i){const n=t=>{const n=e.getDataAttribute(t,i);null!==n?(e.removeDataAttribute(t,i),t.style.setProperty(i,n)):t.style.removeProperty(i)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(e,n){if(i.isElement(e))n(e);else for(const i of t.find(e,this._element))n(i)}}return r}(a(),o(),s())}(x)),x.exports}
/*!
        * Bootstrap modal.js v5.3.5 (https://getbootstrap.com/)
        * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
        * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
        */var C=(y||(y=1,function(e){e.exports=function(e,t,i,n,s,o,a,r){const l="modal",h=".bs.modal",c="Escape",d=`hide${h}`,u=`hidePrevented${h}`,m=`hidden${h}`,p=`show${h}`,f=`shown${h}`,g=`resize${h}`,v=`click.dismiss${h}`,w=`mousedown.dismiss${h}`,_=`keydown.dismiss${h}`,b=`click${h}.data-api`,y="modal-open",$="fade",x="show",E="modal-static",C=".modal.show",k=".modal-dialog",A=".modal-body",L='[data-bs-toggle="modal"]',I={backdrop:!0,focus:!0,keyboard:!0},D={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class M extends e{constructor(e,t){super(e,t),this._dialog=i.findOne(k,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new r,this._addEventListeners()}static get Default(){return I}static get DefaultType(){return D}static get NAME(){return l}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||t.trigger(this._element,p,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(y),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){this._isShown&&!this._isTransitioning&&(t.trigger(this._element,d).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(x),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){t.off(window,h),t.off(this._dialog,h),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new n({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new o({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=i.findOne(A,this._dialog);n&&(n.scrollTop=0),a.reflow(this._element),this._element.classList.add(x);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,t.trigger(this._element,f,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){t.on(this._element,_,(e=>{e.key===c&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),t.on(window,g,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),t.on(this._element,w,(e=>{t.one(this._element,v,(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(y),this._resetAdjustments(),this._scrollBar.reset(),t.trigger(this._element,m)}))}_isAnimated(){return this._element.classList.contains($)}_triggerBackdropTransition(){if(t.trigger(this._element,u).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;"hidden"===i||this._element.classList.contains(E)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(E),this._queueCallback((()=>{this._element.classList.remove(E),this._queueCallback((()=>{this._element.style.overflowY=i}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;if(i&&!e){const e=a.isRTL()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!i&&e){const e=a.isRTL()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const i=M.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}}))}}return t.on(document,b,L,(function(e){const n=i.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),t.one(n,p,(e=>{e.defaultPrevented||t.one(n,m,(()=>{a.isVisible(this)&&this.focus()}))}));const s=i.findOne(C);s&&M.getInstance(s).hide(),M.getOrCreateInstance(n).toggle(this)})),s.enableDismissTrigger(M),a.defineJQueryPlugin(M),M}(r(),i(),o(),m(),g(),_(),s(),E())}(d)),d.exports);const k=l(C);let A;new class{constructor(){this.init()}modalVisible(e="show"){const t=document.getElementById("d_confirm__modal");t&&(this.bsModal||(this.bsModal=new k(t)),"show"===e?this.bsModal.show():this.bsModal.hide())}deleteEvent(){const e=new CustomEvent(A.deleteEventName,{detail:{element:A.deletableItem,status:"OK"}});window.dispatchEvent(e)}loader(e=!1){const t=$("#d_confirm__modal button.delete-btn .spinner-border");e?t.css({display:"inline-block"}):t.hide()}async deleteHandle(){A.loader(!0),A.deleteUrl?await axios.delete(A.deleteUrl).then((e=>{e=e.data,A.deleteEvent(),e.message&&showSuccessMessage(e.message)})):A.deleteEvent(),A.modalVisible("hide"),A.loader()}clickDeletableItem(){A.deletableItem=this,A.modalVisible(),A.deleteUrl=$(this).attr("data-url"),A.deleteEventName=$(this).attr("data-event-name")}$_clicks(){$("body").on("click","button.__confirm__delete__btn",this.clickDeletableItem),$("#d_confirm__modal").on("click","button.delete-btn",this.deleteHandle)}init(){A=this,A.deleteEventName="confirmModalEvent",this.$_clicks()}},(new class{constructor(){this.coreParentClass="core-multiple-inputs"}_addMultipleItem(){const e=this;$(".core-multiple-button").click((function(){const t=$(this).closest(`.${e.coreParentClass}`);t.find("select.select2").length&&t.find("select.select2").select2("destroy");const i=t.find(".group-item:first").clone(),n=i.find("input").length,s=t.find(".group-item").length;n&&($.each(i.find(":input").not("input[type='hidden']").not("button"),((e,t)=>{const n=$(t).closest(".form-group"),o=n.find(".validation-error");if("file"===$(t).attr("type")){const e=$(t).attr("id"),n=$(t).attr("data-name").replace("0",s);$(t).val("").attr("data-name",n);const o=e.replace("0",s);$(t).attr("id",o);const a=i.find(`[for="${e}"]`);if($(t).closest(".__uploaded__files").remove(),a.length){const e=a[0],t=$(e).attr("for").replace("0",s),i=$(e).attr("data-input").replace("0",s),n=$(e).attr("data-preview").replace("0",s);$(e).attr("for",t),$(e).attr("data-input",i),$(e).attr("data-preview",n)}i.find(".hidden-file-inputs").html(""),i.find(".__uploaded__files").html(""),i.find(".__file__list__default").html("")}else{const e=$(t),n=e.attr("name").replace("0",s),o=i.find(`label[for="${e.attr("id")}"]`);e.val("").attr("name",n);const a=`${e.attr("data-name")}_${(new Date).getTime()}`;o.length&&o.attr("for",a),e.attr("id",a)}const a=o.attr("data-name").replace("0",s);o.attr("data-name",a).removeClass("has-error").text(""),n.removeClass("is-invalid")})),n>1&&i.addClass("grouped"),i.attr("data-index",s),i.append(e._getRemoveIcon()),t.find(".multiple-group-content").append(i)),t.find("select.select2").length&&select2Init(t)}))}_deleteMultipleItem(){const e=this;$(document).on("click",".remove-multiple-item",(function(){const t=$(this).closest(".core-multiple-inputs");$(this).closest(".group-item").remove(),e._resetInputName(t)}))}_resetInputName(e){let t=1;e.find(".group-item:not(:first)").each(((e,i)=>{$(i).find(":input").each(((e,n)=>{const s=$(i).attr("data-index"),o=$(n).closest(".form-group").find(".validation-error");if($(n).attr("name")){const e=$(n).attr("name").replace(s,t),i=o.attr("data-name").replace(s,t);$(n).attr("name",e),o.attr("data-name",i)}})),$(i).attr("data-index",t),t++}))}_getRemoveIcon(){return'<i class="flaticon-circle remove-multiple-item"></i>'}init(){$(`.${this.coreParentClass}`).length&&(this._addMultipleItem(),this._deleteMultipleItem())}}).init();const L=new h("cropImageModal");class I{constructor(){this.init()}init(){this.deleteFileEvent(),this.$_functions()}$_functions(){$("body").on("click",".__delete__file__btn",this.deleteFileHandler.bind(this)),$("input[type=file].temp-file-type").change(this.fileChangeHandle.bind(this))}getAttribute(e){return this.$el.getAttribute(`data-${e}`)}fileChangeHandle(){this.$el=event.target,this.$fileListEl=$(this.$el).siblings("div.__file__list__default"),this.$fileErrorBox=$(this.$el).siblings("div.error-messages-block"),this.$fileHiddenInputsBox=$(this.$el).siblings(".hidden-file-inputs"),this.resetUploader(),this.fileData=this.$el.files,this.filename="",$(this.$el).data("has-crop")?(void 0===this.cropContainer&&(this.initCroppie(),this.cropModalActions()),this.cropperImageChange()):(this.removeOldUploadedFiles(),this.generateFormDataForFiles()),this.$el.value=""}removeOldUploadedFiles(){this.is_multiple=null!==this.$el.getAttribute("multiple"),this.is_multiple||$(this.$el).siblings(".__uploaded__files").remove()}initCroppie(){this.cropContainer=$(".crop-img-container").croppie({enableExif:!0,viewport:{width:200,height:200,type:"circle"},boundary:{width:300,height:300}})}cropperImageChange(){L.show();const e=new FileReader;e.onload=e=>{this.cropContainer.croppie("bind",{url:e.target.result})},e.readAsDataURL(this.fileData[0]),this.filename=this.fileData[0].name}cropModalActions(){L.save((()=>{this.cropContainer.croppie("result",{type:"canvas",size:"viewport"}).then((e=>{this.removeOldUploadedFiles();const t=new FormData;t.append("config_key",`${this.getAttribute("config-key")}.${this.getAttribute("name")}`),t.append("file",e),t.append("name",this.filename),this.sendData(t,0),this.inputName=this.getAttribute("name"),L.hide()}))}))}resetUploader(){this.$fileListEl.html(""),this.$fileErrorBox.find("ul").html(""),this.$fileErrorBox.hide(),this.$fileHiddenInputsBox.html("")}generateFormDataForFiles(){if(this.fileData){this.inputName=this.getAttribute("name");const e=this.getAttribute("config-key");for(const[t,i]of Object.entries(this.fileData)){const n=new FormData;n.append("config_key",`${e}.${this.inputName}`),n.append("file",i),this.sendData(n,t)}}}async sendData(e,t){this.createPreviewBlock(t),await axios.post(route("dashboard.files.storeTempFile"),e,{onUploadProgress:e=>{const i=e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length");if(null!==i){const n=Math.round(100*e.loaded/i);this.progressBar(n,t)}}}).then((e=>{e=e.data,this.setPreviewValue(e,t),this.appendDeleteBtn(t),this.createHiddenInputs(e)})).catch((e=>{this.errorHandler(e,t),this.appendDeleteBtn(t,!0)}))}setPreviewValue(e,t){const i=$(this.$fileListEl).find(`.file__item[data-index=${t}]`);i.addClass(`file__item__type__${e.file_type}`),i.html(this.createHtmlForFile(e))}appendDeleteBtn(e,t=!1){const i=` <button class="position-absolute __delete__file __delete__file__btn"\n                    data-index="${e}"\n                    data-event-name="deleteFileItemEvent"\n                    type="button"><i class="fas fa-times"></i></button>\n                    `;$(this.$fileListEl).find(`.file__item[data-index=${e}]`).append(i)}createHiddenInputs(e){let t="";this.is_multiple&&(t="[]"),this.$fileHiddenInputsBox.append(`<input type="hidden" name="${this.inputName}${t}" value="${e.name}">`)}errorHandler(e,t){if($(this.$fileListEl).find(`.file__item[data-index=${t}]`).find(".progress-bar").addClass("bg-danger"),e.response&&e.response.data.errors){this.$fileErrorBox.show(),e=e.response.data;for(const i of Object.entries(e.errors))this.$fileErrorBox.find("ul").append(`<li data-index="${t}">File :${t} ${i}</li>`)}}progressBar(e,t){$(this.$fileListEl).find(`.file__item[data-index=${t}] .file__progress .progress-bar`).css({width:`${e}%`}).attr("aria-valuenow",e).html(`${e}%`)}createPreviewBlock(e){const t=`\n            <div class="file__item d-flex justify-content-center position-relative mt-2" data-index="${e}">\n                <div class="progress file__progress ">\n                    <div class="progress-bar"\n                         role="progressbar"\n                         style="width: 0%;"\n                         aria-valuenow="0"\n                         aria-valuemin="0"\n                         aria-valuemax="100">\n                        0%\n                    </div>\n                </div>\n            </div>\n    `;this.$fileListEl.append(t)}createHtmlForFile(e){return"image"===e.file_type?`<img src="${e.file_url}" alt="${e.original_name}" class="upload-file-img">`:`<span class="mr-5 text-primary p-2">${e.original_name}</span>`}deleteFileHandler(e){const t=e.target,i=$(t).data("index");this.$fileErrorBox.find(`ul li[data-index="${i}"]`).remove(),this.$fileErrorBox.find("ul li").length||this.$fileErrorBox.hide(),$(t).closest(".file__item").remove(),this.$fileHiddenInputsBox.html(""),this.deleteFileEvent()}deleteFileEvent(){window.addEventListener("deleteFileItemInDbEvent",(e=>{const t=e.detail.element;$(t).parents(".__uploaded__files").find(".file__item").length<2&&$(t).parents(".__uploaded__files").remove(),$(t).parents(".file__item").remove()}))}}var D,M;new I,window.FileUploader=I,D="undefined"!=typeof self?self:void 0,M=function(){"function"!=typeof Promise&&function(e){function i(e,t){return function(){e.apply(t,arguments)}}function n(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,i(o,this),i(a,this))}function s(e){var t=this;return null===this._state?void this._deferreds.push(e):void c((function(){var i=t._state?e.onFulfilled:e.onRejected;if(null!==i){var n;try{n=i(t._value)}catch(s){return void e.reject(s)}e.resolve(n)}else(t._state?e.resolve:e.reject)(t._value)}))}function o(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void l(i(t,e),i(o,this),i(a,this))}this._state=!0,this._value=e,r.call(this)}catch(n){a.call(this,n)}}function a(e){this._state=!1,this._value=e,r.call(this)}function r(){for(var e=0,t=this._deferreds.length;t>e;e++)s.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,i){var n=!1;try{e((function(e){n||(n=!0,t(e))}),(function(e){n||(n=!0,i(e))}))}catch(s){if(n)return;n=!0,i(s)}}var h=setTimeout,c="function"==typeof setImmediate&&setImmediate||function(e){h(e,1)},d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var i=this;return new n((function(n,o){s.call(i,new function(e,t,i,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=i,this.reject=n}(e,t,n,o))}))},n.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new n((function(t,i){function n(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var r=a.then;if("function"==typeof r)return void r.call(a,(function(e){n(o,e)}),i)}e[o]=a,0==--s&&t(e)}catch(l){i(l)}}if(0===e.length)return t([]);for(var s=e.length,o=0;o<e.length;o++)n(o,e[o])}))},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n((function(t){t(e)}))},n.reject=function(e){return new n((function(t,i){i(e)}))},n.race=function(e){return new n((function(t,i){for(var n=0,s=e.length;s>n;n++)e[n].then(t,i)}))},n._setImmediateFn=function(e){c=e},void 0!==t&&t.exports?t.exports=n:e.Promise||(e.Promise=n)}(this),"undefined"!=typeof window&&"function"!=typeof window.CustomEvent&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e}(),"undefined"==typeof HTMLCanvasElement||HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){for(var n=atob(this.toDataURL(t,i).split(",")[1]),s=n.length,o=new Uint8Array(s),a=0;a<s;a++)o[a]=n.charCodeAt(a);e(new Blob([o],{type:t||"image/png"}))}});var e,i,n,s=["Webkit","Moz","ms"],o="undefined"!=typeof document?document.createElement("div").style:{},a=[1,8,3,6],r=[2,7,4,5];function l(e){if(e in o)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=s.length;i--;)if((e=s[i]+t)in o)return e}function h(e,t){for(var i in e=e||{},t)t[i]&&t[i].constructor&&t[i].constructor===Object?(e[i]=e[i]||{},h(e[i],t[i])):e[i]=t[i];return e}function c(e){return h({},e)}function d(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")}function u(e,t,i){if("string"==typeof t){var n=t;(t={})[n]=i}for(var s in t)e.style[s]=t[s]}function m(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function p(e,t){for(var i in t)e.setAttribute(i,t[i])}function f(e){return parseInt(e,10)}function g(e,t){var i=e.naturalWidth,n=e.naturalHeight,s=t||b(e);if(s&&s>=5){var o=i;i=n,n=o}return{width:i,height:n}}i=l("transform"),e=l("transformOrigin"),n=l("userSelect");var v={translate3d:{suffix:", 0px"},translate:{suffix:""}},w=function(e,t,i){this.x=parseFloat(e),this.y=parseFloat(t),this.scale=parseFloat(i)};w.parse=function(e){return e.style?w.parse(e.style[i]):e.indexOf("matrix")>-1||e.indexOf("none")>-1?w.fromMatrix(e):w.fromString(e)},w.fromMatrix=function(e){var t=e.substring(7).split(",");return t.length&&"none"!==e||(t=[1,0,0,1,0,0]),new w(f(t[4]),f(t[5]),parseFloat(t[0]))},w.fromString=function(e){var t=e.split(") "),i=t[0].substring(z.globals.translate.length+1).split(","),n=t.length>1?t[1].substring(6):1,s=i.length>1?i[0]:0,o=i.length>1?i[1]:0;return new w(s,o,n)},w.prototype.toString=function(){var e=v[z.globals.translate].suffix||"";return z.globals.translate+"("+this.x+"px, "+this.y+"px"+e+") scale("+this.scale+")"};var _=function(t){if(!t||!t.style[e])return this.x=0,void(this.y=0);var i=t.style[e].split(" ");this.x=parseFloat(i[0]),this.y=parseFloat(i[1])};function b(e){return e.exifdata&&e.exifdata.Orientation?f(e.exifdata.Orientation):1}function y(e,t,i){var n=t.width,s=t.height,o=e.getContext("2d");switch(e.width=t.width,e.height=t.height,o.save(),i){case 2:o.translate(n,0),o.scale(-1,1);break;case 3:o.translate(n,s),o.rotate(180*Math.PI/180);break;case 4:o.translate(0,s),o.scale(1,-1);break;case 5:e.width=s,e.height=n,o.rotate(90*Math.PI/180),o.scale(1,-1);break;case 6:e.width=s,e.height=n,o.rotate(90*Math.PI/180),o.translate(0,-s);break;case 7:e.width=s,e.height=n,o.rotate(-90*Math.PI/180),o.translate(-n,s),o.scale(1,-1);break;case 8:e.width=s,e.height=n,o.translate(0,n),o.rotate(-90*Math.PI/180)}o.drawImage(t,0,0,n,s),o.restore()}function $(){var t,s,o,a,r,l,h=this.options.viewport.type?"cr-vp-"+this.options.viewport.type:null;this.options.useCanvas=this.options.enableOrientation||x.call(this),this.data={},this.elements={},t=this.elements.boundary=document.createElement("div"),o=this.elements.viewport=document.createElement("div"),s=this.elements.img=document.createElement("img"),a=this.elements.overlay=document.createElement("div"),this.options.useCanvas?(this.elements.canvas=document.createElement("canvas"),this.elements.preview=this.elements.canvas):this.elements.preview=s,m(t,"cr-boundary"),t.setAttribute("aria-dropeffect","none"),r=this.options.boundary.width,l=this.options.boundary.height,u(t,{width:r+(isNaN(r)?"":"px"),height:l+(isNaN(l)?"":"px")}),m(o,"cr-viewport"),h&&m(o,h),u(o,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),o.setAttribute("tabindex",0),m(this.elements.preview,"cr-image"),p(this.elements.preview,{alt:"preview","aria-grabbed":"false"}),m(a,"cr-overlay"),this.element.appendChild(t),t.appendChild(this.elements.preview),t.appendChild(o),t.appendChild(a),m(this.element,"croppie-container"),this.options.customClass&&m(this.element,this.options.customClass),function(){var e,t,s,o,a,r=this,l=!1;function h(e,t){var i=r.elements.preview.getBoundingClientRect(),n=a.y+t,s=a.x+e;r.options.enforceBoundary?(o.top>i.top+t&&o.bottom<i.bottom+t&&(a.y=n),o.left>i.left+e&&o.right<i.right+e&&(a.x=s)):(a.y=n,a.x=s)}function c(e){r.elements.preview.setAttribute("aria-grabbed",e),r.elements.boundary.setAttribute("aria-dropeffect",e?"move":"none")}function m(i){if((void 0===i.button||0===i.button)&&(i.preventDefault(),!l)){if(l=!0,e=i.pageX,t=i.pageY,i.touches){var s=i.touches[0];e=s.pageX,t=s.pageY}c(l),a=w.parse(r.elements.preview),window.addEventListener("mousemove",p),window.addEventListener("touchmove",p),window.addEventListener("mouseup",f),window.addEventListener("touchend",f),document.body.style[n]="none",o=r.elements.viewport.getBoundingClientRect()}}function p(n){n.preventDefault();var o=n.pageX,l=n.pageY;if(n.touches){var c=n.touches[0];o=c.pageX,l=c.pageY}var m=o-e,p=l-t,f={};if("touchmove"===n.type&&n.touches.length>1){var g=n.touches[0],v=n.touches[1],w=Math.sqrt((g.pageX-v.pageX)*(g.pageX-v.pageX)+(g.pageY-v.pageY)*(g.pageY-v.pageY));s||(s=w/r._currentZoom);var _=w/s;return E.call(r,_),void d(r.elements.zoomer)}h(m,p),f[i]=a.toString(),u(r.elements.preview,f),k.call(r),t=l,e=o}function f(){c(l=!1),window.removeEventListener("mousemove",p),window.removeEventListener("touchmove",p),window.removeEventListener("mouseup",f),window.removeEventListener("touchend",f),document.body.style[n]="",C.call(r),D.call(r),s=0}r.elements.overlay.addEventListener("mousedown",m),r.elements.viewport.addEventListener("keydown",(function(e){var t,l,c;if(!e.shiftKey||38!==e.keyCode&&40!==e.keyCode){if(r.options.enableKeyMovement&&e.keyCode>=37&&e.keyCode<=40){e.preventDefault();var d=function(e){switch(e){case 37:return[1,0];case 38:return[0,1];case 39:return[-1,0];case 40:return[0,-1]}}(e.keyCode);a=w.parse(r.elements.preview),document.body.style[n]="none",o=r.elements.viewport.getBoundingClientRect(),c={},h((l=d)[0],l[1]),c[i]=a.toString(),u(r.elements.preview,c),k.call(r),document.body.style[n]="",C.call(r),D.call(r),s=0}}else t=38===e.keyCode?parseFloat(r.elements.zoomer.value)+parseFloat(r.elements.zoomer.step):parseFloat(r.elements.zoomer.value)-parseFloat(r.elements.zoomer.step),r.setZoom(t)})),r.elements.overlay.addEventListener("touchstart",m)}.call(this),this.options.enableZoom&&function(){var t=this,n=t.elements.zoomerWrap=document.createElement("div"),s=t.elements.zoomer=document.createElement("input");function o(){(function(t){var n=this,s=t?t.transform:w.parse(n.elements.preview),o=t?t.viewportRect:n.elements.viewport.getBoundingClientRect(),a=t?t.origin:new _(n.elements.preview);function r(){var t={};t[i]=s.toString(),t[e]=a.toString(),u(n.elements.preview,t)}if(n._currentZoom=t?t.value:n._currentZoom,s.scale=n._currentZoom,n.elements.zoomer.setAttribute("aria-valuenow",n._currentZoom),r(),n.options.enforceBoundary){var l=function(e){var t=this._currentZoom,i=e.width,n=e.height,s=this.elements.boundary.clientWidth/2,o=this.elements.boundary.clientHeight/2,a=this.elements.preview.getBoundingClientRect(),r=a.width,l=a.height,h=i/2,c=n/2,d=-1*(h/t-s),u=-1*(c/t-o),m=1/t*h,p=1/t*c;return{translate:{maxX:d,minX:d-(r*(1/t)-i*(1/t)),maxY:u,minY:u-(l*(1/t)-n*(1/t))},origin:{maxX:r*(1/t)-m,minX:m,maxY:l*(1/t)-p,minY:p}}}.call(n,o),h=l.translate,c=l.origin;s.x>=h.maxX&&(a.x=c.minX,s.x=h.maxX),s.x<=h.minX&&(a.x=c.maxX,s.x=h.minX),s.y>=h.maxY&&(a.y=c.minY,s.y=h.maxY),s.y<=h.minY&&(a.y=c.maxY,s.y=h.minY)}r(),I.call(n),D.call(n)}).call(t,{value:parseFloat(s.value),origin:new _(t.elements.preview),viewportRect:t.elements.viewport.getBoundingClientRect(),transform:w.parse(t.elements.preview)})}function a(e){var i,n;if("ctrl"===t.options.mouseWheelZoom&&!0!==e.ctrlKey)return 0;i=e.wheelDelta?e.wheelDelta/1200:e.deltaY?e.deltaY/1060:e.detail?e.detail/-60:0,n=t._currentZoom+i*t._currentZoom,e.preventDefault(),E.call(t,n),o.call(t)}m(n,"cr-slider-wrap"),m(s,"cr-slider"),s.type="range",s.step="0.0001",s.value="1",s.style.display=t.options.showZoomer?"":"none",s.setAttribute("aria-label","zoom"),t.element.appendChild(n),n.appendChild(s),t._currentZoom=1,t.elements.zoomer.addEventListener("input",o),t.elements.zoomer.addEventListener("change",o),t.options.mouseWheelZoom&&(t.elements.boundary.addEventListener("mousewheel",a),t.elements.boundary.addEventListener("DOMMouseScroll",a))}.call(this),this.options.enableResize&&function(){var e,t,i,s,o,a,r,l=this,h=document.createElement("div"),c=!1;function d(a){if((void 0===a.button||0===a.button)&&(a.preventDefault(),!c)){var r=l.elements.overlay.getBoundingClientRect();if(c=!0,t=a.pageX,i=a.pageY,e=-1!==a.currentTarget.className.indexOf("vertical")?"v":"h",s=r.width,o=r.height,a.touches){var h=a.touches[0];t=h.pageX,i=h.pageY}window.addEventListener("mousemove",p),window.addEventListener("touchmove",p),window.addEventListener("mouseup",f),window.addEventListener("touchend",f),document.body.style[n]="none"}}function p(n){var a=n.pageX,r=n.pageY;if(n.preventDefault(),n.touches){var c=n.touches[0];a=c.pageX,r=c.pageY}var d=a-t,m=r-i,p=l.options.viewport.height+m,f=l.options.viewport.width+d;"v"===e&&p>=50&&p<=o?(u(h,{height:p+"px"}),l.options.boundary.height+=m,u(l.elements.boundary,{height:l.options.boundary.height+"px"}),l.options.viewport.height+=m,u(l.elements.viewport,{height:l.options.viewport.height+"px"})):"h"===e&&f>=50&&f<=s&&(u(h,{width:f+"px"}),l.options.boundary.width+=d,u(l.elements.boundary,{width:l.options.boundary.width+"px"}),l.options.viewport.width+=d,u(l.elements.viewport,{width:l.options.viewport.width+"px"})),k.call(l),F.call(l),C.call(l),D.call(l),i=r,t=a}function f(){c=!1,window.removeEventListener("mousemove",p),window.removeEventListener("touchmove",p),window.removeEventListener("mouseup",f),window.removeEventListener("touchend",f),document.body.style[n]=""}m(h,"cr-resizer"),u(h,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),this.options.resizeControls.height&&(m(a=document.createElement("div"),"cr-resizer-vertical"),h.appendChild(a)),this.options.resizeControls.width&&(m(r=document.createElement("div"),"cr-resizer-horisontal"),h.appendChild(r)),a&&(a.addEventListener("mousedown",d),a.addEventListener("touchstart",d)),r&&(r.addEventListener("mousedown",d),r.addEventListener("touchstart",d)),this.elements.boundary.appendChild(h)}.call(this)}function x(){return this.options.enableExif&&window.EXIF}function E(e){if(this.options.enableZoom){var t=this.elements.zoomer,i=R(e,4);t.value=Math.max(parseFloat(t.min),Math.min(parseFloat(t.max),i)).toString()}}function C(t){var n=this._currentZoom,s=this.elements.preview.getBoundingClientRect(),o=this.elements.viewport.getBoundingClientRect(),a=w.parse(this.elements.preview.style[i]),r=new _(this.elements.preview),l=o.top-s.top+o.height/2,h=o.left-s.left+o.width/2,c={},d={};if(t){var m=r.x,p=r.y,f=a.x,g=a.y;c.y=m,c.x=p,a.y=f,a.x=g}else c.y=l/n,c.x=h/n,d.y=(c.y-r.y)*(1-n),d.x=(c.x-r.x)*(1-n),a.x-=d.x,a.y-=d.y;var v={};v[e]=c.x+"px "+c.y+"px",v[i]=a.toString(),u(this.elements.preview,v)}function k(){if(this.elements){var e=this.elements.boundary.getBoundingClientRect(),t=this.elements.preview.getBoundingClientRect();u(this.elements.overlay,{width:t.width+"px",height:t.height+"px",top:t.top-e.top+"px",left:t.left-e.left+"px"})}}_.prototype.toString=function(){return this.x+"px "+this.y+"px"};var A,L,I=(A=k,function(){var e=this,t=arguments;clearTimeout(L),L=setTimeout((function(){L=null,A.apply(e,t)}),500)});function D(){var e,t=this.get();M.call(this)&&(this.options.update.call(this,t),this.$&&"undefined"==typeof Prototype?this.$(this.element).trigger("update.croppie",t):(window.CustomEvent?e=new CustomEvent("update",{detail:t}):(e=document.createEvent("CustomEvent")).initCustomEvent("update",!0,!0,t),this.element.dispatchEvent(e)))}function M(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function B(){var t,n={},s=this.elements.preview,o=new w(0,0,1),a=new _;M.call(this)&&!this.data.bound&&(this.data.bound=!0,n[i]=o.toString(),n[e]=a.toString(),n.opacity=1,u(s,n),t=this.elements.preview.getBoundingClientRect(),this._originalImageWidth=t.width,this._originalImageHeight=t.height,this.data.orientation=x.call(this)?b(this.elements.img):this.data.orientation,this.options.enableZoom?F.call(this,!0):this._currentZoom=1,o.scale=this._currentZoom,n[i]=o.toString(),u(s,n),this.data.points.length?function(t){if(4!==t.length)throw"Croppie - Invalid number of points supplied: "+t;var n=t[2]-t[0],s=this.elements.viewport.getBoundingClientRect(),o=this.elements.boundary.getBoundingClientRect(),a=s.left-o.left,r=s.top-o.top,l=s.width/n,h=t[1],c=t[0],d=-1*t[1]+r,m=-1*t[0]+a,p={};p[e]=c+"px "+h+"px",p[i]=new w(m,d,l).toString(),u(this.elements.preview,p),E.call(this,l),this._currentZoom=l}.call(this,this.data.points):function(){var e=this.elements.preview.getBoundingClientRect(),t=this.elements.viewport.getBoundingClientRect(),n=this.elements.boundary.getBoundingClientRect(),s=t.left-n.left,o=t.top-n.top,a=s-(e.width-t.width)/2,r=o-(e.height-t.height)/2,l=new w(a,r,this._currentZoom);u(this.elements.preview,i,l.toString())}.call(this),C.call(this),k.call(this))}function F(e){var t,i,n,s,o=Math.max(this.options.minZoom,0)||0,a=this.options.maxZoom||1.5,r=this.elements.zoomer,l=parseFloat(r.value),h=this.elements.boundary.getBoundingClientRect(),c=g(this.elements.img,this.data.orientation),u=this.elements.viewport.getBoundingClientRect();this.options.enforceBoundary&&(n=u.width/c.width,s=u.height/c.height,o=Math.max(n,s)),o>=a&&(a=o+1),r.min=R(o,4),r.max=R(a,4),!e&&(l<r.min||l>r.max)?E.call(this,l<r.min?r.min:r.max):e&&(i=Math.max(h.width/c.width,h.height/c.height),t=null!==this.data.boundZoom?this.data.boundZoom:i,E.call(this,t)),d(r)}function T(e){var t=e.points,i=f(t[0]),n=f(t[1]),s=f(t[2])-i,o=f(t[3])-n,a=e.circle,r=document.createElement("canvas"),l=r.getContext("2d"),h=e.outputWidth||s,c=e.outputHeight||o;r.width=h,r.height=c,e.backgroundColor&&(l.fillStyle=e.backgroundColor,l.fillRect(0,0,h,c));var d=i,u=n,m=s,p=o,g=0,v=0,w=h,_=c;return i<0&&(d=0,g=Math.abs(i)/s*h),m+d>this._originalImageWidth&&(w=(m=this._originalImageWidth-d)/s*h),n<0&&(u=0,v=Math.abs(n)/o*c),p+u>this._originalImageHeight&&(_=(p=this._originalImageHeight-u)/o*c),l.drawImage(this.elements.preview,d,u,m,p,g,v,w,_),a&&(l.fillStyle="#fff",l.globalCompositeOperation="destination-in",l.beginPath(),l.arc(r.width/2,r.height/2,r.width/2,0,2*Math.PI,!0),l.closePath(),l.fill()),r}function H(e,t){var i,n=this,s=[],o=null,a=x.call(n);if("string"==typeof e)i=e,e={};else if(Array.isArray(e))s=e.slice();else{if(void 0===e&&n.data.url)return B.call(n),D.call(n),null;i=e.url,s=e.points||[],o=void 0===e.zoom?null:e.zoom}return n.data.bound=!1,n.data.url=i||n.data.url,n.data.boundZoom=o,function(e,t){if(!e)throw"Source image missing";var i=new Image;return i.style.opacity="0",new Promise((function(n,s){function o(){i.style.opacity="1",setTimeout((function(){n(i)}),1)}i.removeAttribute("crossOrigin"),e.match(/^https?:\/\/|^\/\//)&&i.setAttribute("crossOrigin","anonymous"),i.onload=function(){t?EXIF.getData(i,(function(){o()})):o()},i.onerror=function(e){i.style.opacity=1,setTimeout((function(){s(e)}),1)},i.src=e}))}(i,a).then((function(i){if(function(e){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,(function(t){e.classList.add(t)})),this.elements.img.parentNode.replaceChild(e,this.elements.img),this.elements.preview=e),this.elements.img=e}.call(n,i),s.length)n.options.relative&&(s=[s[0]*i.naturalWidth/100,s[1]*i.naturalHeight/100,s[2]*i.naturalWidth/100,s[3]*i.naturalHeight/100]);else{var o,a,r=g(i),l=n.elements.viewport.getBoundingClientRect(),h=l.width/l.height;r.width/r.height>h?o=(a=r.height)*h:(o=r.width,a=r.height/h);var c=(r.width-o)/2,d=(r.height-a)/2,u=c+o,m=d+a;n.data.points=[c,d,u,m]}n.data.orientation=e.orientation||1,n.data.points=s.map((function(e){return parseFloat(e)})),n.options.useCanvas&&function(e){var t=this.elements.canvas,i=this.elements.img;t.getContext("2d").clearRect(0,0,t.width,t.height),t.width=i.width,t.height=i.height,y(t,i,this.options.enableOrientation&&e||b(i))}.call(n,n.data.orientation),B.call(n),D.call(n),t&&t()}))}function R(e,t){return parseFloat(e).toFixed(t||0)}function S(){var e=this.elements.preview.getBoundingClientRect(),t=this.elements.viewport.getBoundingClientRect(),i=t.left-e.left,n=t.top-e.top,s=(t.width-this.elements.viewport.offsetWidth)/2,o=(t.height-this.elements.viewport.offsetHeight)/2,a=i+this.elements.viewport.offsetWidth+s,r=n+this.elements.viewport.offsetHeight+o,l=this._currentZoom;(l===1/0||isNaN(l))&&(l=1);var h=this.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return i=Math.max(h,i/l),n=Math.max(h,n/l),a=Math.max(h,a/l),r=Math.max(h,r/l),{points:[R(i),R(n),R(a),R(r)],zoom:l,orientation:this.data.orientation}}var N={type:"canvas",format:"png",quality:1},O=["jpeg","webp","png"];function j(e){var t=this,i=S.call(t),n=h(c(N),c(e)),s="string"==typeof e?e:n.type||"base64",o=n.size||"viewport",a=n.format,r=n.quality,l=n.backgroundColor,d="boolean"==typeof n.circle?n.circle:"circle"===t.options.viewport.type,p=t.elements.viewport.getBoundingClientRect(),f=p.width/p.height;return"viewport"===o?(i.outputWidth=p.width,i.outputHeight=p.height):"object"==typeof o&&(o.width&&o.height?(i.outputWidth=o.width,i.outputHeight=o.height):o.width?(i.outputWidth=o.width,i.outputHeight=o.width/f):o.height&&(i.outputWidth=o.height*f,i.outputHeight=o.height)),O.indexOf(a)>-1&&(i.format="image/"+a,i.quality=r),i.circle=d,i.url=t.data.url,i.backgroundColor=l,new Promise((function(e){switch(s.toLowerCase()){case"rawcanvas":e(T.call(t,i));break;case"canvas":case"base64":e(function(e){return T.call(this,e).toDataURL(e.format,e.quality)}.call(t,i));break;case"blob":(function(e){var t=this;return new Promise((function(i){T.call(t,e).toBlob((function(e){i(e)}),e.format,e.quality)}))}).call(t,i).then(e);break;default:e(function(e){var t=e.points,i=document.createElement("div"),n=document.createElement("img"),s=t[2]-t[0],o=t[3]-t[1];return m(i,"croppie-result"),i.appendChild(n),u(n,{left:-1*t[0]+"px",top:-1*t[1]+"px"}),n.src=e.url,u(i,{width:s+"px",height:o+"px"}),i}.call(t,i))}}))}function Y(e){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var t,i,n,s,o,l=this.elements.canvas;if(this.data.orientation=(t=this.data.orientation,i=e,s=(n=a.indexOf(t)>-1?a:r).indexOf(t),o=i/90%n.length,n[(n.length+s+o%n.length)%n.length]),y(l,this.elements.img,this.data.orientation),C.call(this,!0),F.call(this),Math.abs(e)/90%2==1){var h=this._originalImageHeight,c=this._originalImageWidth;this._originalImageWidth=h,this._originalImageHeight=c}}if("undefined"!=typeof window&&window.jQuery){var P=window.jQuery;P.fn.croppie=function(e){if("string"==typeof e){var t=Array.prototype.slice.call(arguments,1),i=P(this).data("croppie");return"get"===e?i.get():"result"===e?i.result.apply(i,t):"bind"===e?i.bind.apply(i,t):this.each((function(){var i=P(this).data("croppie");if(i){var n=i[e];if(!P.isFunction(n))throw"Croppie "+e+" method not found";n.apply(i,t),"destroy"===e&&P(this).removeData("croppie")}}))}return this.each((function(){var t=new z(this,e);t.$=P,P(this).data("croppie",t)}))}}function z(e,t){if(e.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");if(this.element=e,this.options=h(c(z.defaults),t),"img"===this.element.tagName.toLowerCase()){var i=this.element;m(i,"cr-original-image"),p(i,{"aria-hidden":"true",alt:""});var n=document.createElement("div");this.element.parentNode.appendChild(n),n.appendChild(i),this.element=n,this.options.url=this.options.url||i.src}if($.call(this),this.options.url){var s={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,H.call(this,s)}}return z.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}},z.globals={translate:"translate3d"},h(z.prototype,{bind:function(e,t){return H.call(this,e,t)},get:function(){var e=S.call(this),t=e.points;return this.options.relative&&(t[0]/=this.elements.img.naturalWidth/100,t[1]/=this.elements.img.naturalHeight/100,t[2]/=this.elements.img.naturalWidth/100,t[3]/=this.elements.img.naturalHeight/100),e},result:function(e){return j.call(this,e)},refresh:function(){return function(){B.call(this)}.call(this)},setZoom:function(e){E.call(this,e),d(this.elements.zoomer)},rotate:function(e){Y.call(this,e)},destroy:function(){return function(){var e,t;this.element.removeChild(this.elements.boundary),t="croppie-container",(e=this.element).classList?e.classList.remove(t):e.className=e.className.replace(t,""),this.options.enableZoom&&this.element.removeChild(this.elements.zoomerWrap),delete this.elements}.call(this)}}),z},"function"==typeof define&&define.amd?define(M):"object"==typeof e&&"string"!=typeof e.nodeName?t.exports=M():D.Croppie=M(),window.CKEditors={},alert(111111111),$((function(){(function(e=".ckeditor5"){const t=document.querySelectorAll(e);alert(22222222),t.forEach((e=>{const t=e.getAttribute("id");t&&window.ClassicEditor.create(e,{}).then((i=>{e.hasAttribute("disabled")&&(i.isReadOnly=!0),i.model.document.on("change:data",(()=>{i.updateSourceElement()})),console.log(t,11111111),window.CKEditors[t]=i})).catch((e=>{console.error("Ошибка при инициализации CKEditor:",e)}))}))})(),document.querySelectorAll(".ckeditor5").forEach((e=>{ClassicEditor.create(e,{cloudServices:{tokenUrl:"https://33333.cke-cs.com/token/dev/ijrDsqFix838Gh3wGO3F77FSW94BwcLXprJ4APSp3XQ26xsUHTi0jcb1hoBt",uploadUrl:"https://33333.cke-cs.com/easyimage/upload/"}}).then((t=>{$(e).attr("disabled")&&(t.isReadOnly=!0),t.model.document.on("change:data",((e,i)=>{t.updateSourceElement()}))})).catch((e=>{console.error(e)}))})),function(){const e=$(".datepicker");e.length&&$.each(e,(function(){const e=$(this);e.datetimepicker({timepicker:!1,format:"d.m.Y",scrollMonth:!1,scrollInput:!1,onChangeDateTime(t,i){let n="";i.val()&&(n=moment(i.val(),"DD.MM.YYYY").format($dashboardDates.js.date_format)),e.siblings(".backend-date-value").val(n)}})}))}(),function(){const e=$(".datetimepicker");e.length&&$.each(e,(function(){const e=$(this);e.datetimepicker({format:"d.m.Y H:i",onChangeDateTime(t,i){let n="";i.val()&&(n=moment(i.val(),"DD.MM.YYYY HH:mm").format($dashboardDates.js.date_time_format)),e.siblings(".backend-date-value").val(n)}})}))}(),function(e,t="select2"){let i=$(`select.${t}`);void 0!==e&&(i=e.find(`select.${t}`)),$.each(i,(function(){$(this).select2({placeholder:$trans("__dashboard.select.option.default"),minimumResultsForSearch:10,tags:$(this).data("allow-tags")||!1,allowClear:$(this).data("allow-clear")||!1})}))}(),$(".open-menu").click((()=>{$(".page").toggleClass("left-menu-opened"),$(".open-menu").toggleClass("open-menu-opened")})),function(){const e=$(".copy-ml-info-btn");e.length&&e.click((function(){const e=$(this),t=e.closest(".tab-pane").find(":input"),i=$(`#__mls__tab__${e.data("to-lang-code")}`);e.prop("disabled",!0),$.each(t,(function(){const t=$(this).attr("name");if(t){const n=t.replace(e.data("current-lang-code"),e.data("to-lang-code")),s=i.find(`*[name="${n}"]`);if(s.length)if(s.hasClass("ckeditor5")){const e=s.attr("id"),t=window.CKEditors[e];console.log(window),t&&t.setData($(this).val())}else s.val($(this).val());setTimeout((()=>{e.prop("disabled",!1)}),120)}}))}))}(),function(){const e=localStorage.getItem("_message");e&&showSuccessMessage(e),localStorage.removeItem("_message")}(),$(".brand-toggle").click((()=>{$(".page").toggleClass("minimaize-menu")})),$(".open-menu").click((()=>{$(".page").toggleClass("left-menu-opened"),$(".open-menu").toggleClass("open-menu-opened")}))})),window.showSuccessMessage=function(e){$.toast({text:e,hideAfter:2e3,position:"top-right",stack:!1,loader:!1,icon:"success",allowToastClose:!1})},window.showErrorMessage=function(e){$.toast({heading:"Error",hideAfter:2e3,text:e,position:"top-right",stack:!1,loader:!1,icon:"error",allowToastClose:!1})}}}}));
//# sourceMappingURL=bundle-legacy.js.map
