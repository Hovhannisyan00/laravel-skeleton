import"./dashboard-init.js";import{r as Ct,a as Ht,b as xt,c as At,d as Vt,e as Zt}from"./tab.js";import{g as qt}from"./_commonjsHelpers.js";import{M as Kt}from"./Modal.js";function ve(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}var bt={exports:{}},yt={exports:{}};/*!
  * Bootstrap backdrop.js v5.3.5 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Xt=yt.exports,Ft;function jt(){return Ft||(Ft=1,function(y,o){(function(n,l){y.exports=l(Ct(),Ht(),xt())})(Xt,function(n,l,v){const L="backdrop",R="fade",A="show",S="mousedown.bs.".concat(L),W={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},P={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class w extends l{constructor(E){super(),this._config=this._getConfig(E),this._isAppended=!1,this._element=null}static get Default(){return W}static get DefaultType(){return P}static get NAME(){return L}show(E){if(!this._config.isVisible){v.execute(E);return}this._append();const B=this._getElement();this._config.isAnimated&&v.reflow(B),B.classList.add(A),this._emulateAnimation(()=>{v.execute(E)})}hide(E){if(!this._config.isVisible){v.execute(E);return}this._getElement().classList.remove(A),this._emulateAnimation(()=>{this.dispose(),v.execute(E)})}dispose(){this._isAppended&&(n.off(this._element,S),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const E=document.createElement("div");E.className=this._config.className,this._config.isAnimated&&E.classList.add(R),this._element=E}return this._element}_configAfterMerge(E){return E.rootElement=v.getElement(E.rootElement),E}_append(){if(this._isAppended)return;const E=this._getElement();this._config.rootElement.append(E),n.on(E,S,()=>{v.execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(E){v.executeAfterTransition(E,this._getElement(),this._config.isAnimated)}}return w})}(yt)),yt.exports}var gt={exports:{}};/*!
  * Bootstrap component-functions.js v5.3.5 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Ut=gt.exports,Ot;function Gt(){return Ot||(Ot=1,function(y,o){(function(n,l){l(o,Ct(),At(),xt())})(Ut,function(n,l,v,L){const R=(A,S="hide")=>{const W="click.dismiss".concat(A.EVENT_KEY),P=A.NAME;l.on(document,W,'[data-bs-dismiss="'.concat(P,'"]'),function(w){if(["A","AREA"].includes(this.tagName)&&w.preventDefault(),L.isDisabled(this))return;const g=v.getElementFromSelector(this)||this.closest(".".concat(P));A.getOrCreateInstance(g)[S]()})};n.enableDismissTrigger=R,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})}(gt,gt.exports)),gt.exports}var Et={exports:{}};/*!
  * Bootstrap focustrap.js v5.3.5 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Qt=Et.exports,Rt;function Jt(){return Rt||(Rt=1,function(y,o){(function(n,l){y.exports=l(Ct(),At(),Ht())})(Qt,function(n,l,v){const L="focustrap",A=".".concat("bs.focustrap"),S="focusin".concat(A),W="keydown.tab".concat(A),P="Tab",w="forward",g="backward",E={autofocus:!0,trapElement:null},B={autofocus:"boolean",trapElement:"element"};class H extends v{constructor(x){super(),this._config=this._getConfig(x),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return E}static get DefaultType(){return B}static get NAME(){return L}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),n.off(document,A),n.on(document,S,x=>this._handleFocusin(x)),n.on(document,W,x=>this._handleKeydown(x)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,n.off(document,A))}_handleFocusin(x){const{trapElement:V}=this._config;if(x.target===document||x.target===V||V.contains(x.target))return;const Q=l.focusableChildren(V);Q.length===0?V.focus():this._lastTabNavDirection===g?Q[Q.length-1].focus():Q[0].focus()}_handleKeydown(x){x.key===P&&(this._lastTabNavDirection=x.shiftKey?g:w)}}return H})}(Et)),Et.exports}var $t={exports:{}};/*!
  * Bootstrap scrollbar.js v5.3.5 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var te=$t.exports,Yt;function ee(){return Yt||(Yt=1,function(y,o){(function(n,l){y.exports=l(Vt(),At(),xt())})(te,function(n,l,v){const L=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",R=".sticky-top",A="padding-right",S="margin-right";class W{constructor(){this._element=document.body}getWidth(){const w=document.documentElement.clientWidth;return Math.abs(window.innerWidth-w)}hide(){const w=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,A,g=>g+w),this._setElementAttributes(L,A,g=>g+w),this._setElementAttributes(R,S,g=>g-w)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,A),this._resetElementAttributes(L,A),this._resetElementAttributes(R,S)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(w,g,E){const B=this.getWidth(),H=j=>{if(j!==this._element&&window.innerWidth>j.clientWidth+B)return;this._saveInitialAttribute(j,g);const x=window.getComputedStyle(j).getPropertyValue(g);j.style.setProperty(g,"".concat(E(Number.parseFloat(x)),"px"))};this._applyManipulationCallback(w,H)}_saveInitialAttribute(w,g){const E=w.style.getPropertyValue(g);E&&n.setDataAttribute(w,g,E)}_resetElementAttributes(w,g){const E=B=>{const H=n.getDataAttribute(B,g);if(H===null){B.style.removeProperty(g);return}n.removeDataAttribute(B,g),B.style.setProperty(g,H)};this._applyManipulationCallback(w,E)}_applyManipulationCallback(w,g){if(v.isElement(w)){g(w);return}for(const E of l.find(w,this._element))g(E)}}return W})}($t)),$t.exports}/*!
  * Bootstrap modal.js v5.3.5 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var ie=bt.exports,Wt;function ne(){return Wt||(Wt=1,function(y,o){(function(n,l){y.exports=l(Zt(),Ct(),At(),jt(),Gt(),Jt(),xt(),ee())})(ie,function(n,l,v,L,R,A,S,W){const P="modal",g=".".concat("bs.modal"),E=".data-api",B="Escape",H="hide".concat(g),j="hidePrevented".concat(g),x="hidden".concat(g),V="show".concat(g),Q="shown".concat(g),vt="resize".concat(g),kt="click.dismiss".concat(g),dt="mousedown.dismiss".concat(g),nt="keydown.dismiss".concat(g),at="click".concat(g).concat(E),ot="modal-open",_t="fade",ut="show",rt="modal-static",Dt=".modal.show",st=".modal-dialog",wt=".modal-body",pt='[data-bs-toggle="modal"]',mt={backdrop:!0,focus:!0,keyboard:!0},ft={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class J extends n{constructor(M,Y){super(M,Y),this._dialog=v.findOne(st,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new W,this._addEventListeners()}static get Default(){return mt}static get DefaultType(){return ft}static get NAME(){return P}toggle(M){return this._isShown?this.hide():this.show(M)}show(M){this._isShown||this._isTransitioning||l.trigger(this._element,V,{relatedTarget:M}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ot),this._adjustDialog(),this._backdrop.show(()=>this._showElement(M)))}hide(){!this._isShown||this._isTransitioning||l.trigger(this._element,H).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ut),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){l.off(window,g),l.off(this._dialog,g),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new L({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new A({trapElement:this._element})}_showElement(M){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const Y=v.findOne(wt,this._dialog);Y&&(Y.scrollTop=0),S.reflow(this._element),this._element.classList.add(ut);const K=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,l.trigger(this._element,Q,{relatedTarget:M})};this._queueCallback(K,this._dialog,this._isAnimated())}_addEventListeners(){l.on(this._element,nt,M=>{if(M.key===B){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),l.on(window,vt,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),l.on(this._element,dt,M=>{l.one(this._element,kt,Y=>{if(!(this._element!==M.target||this._element!==Y.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ot),this._resetAdjustments(),this._scrollBar.reset(),l.trigger(this._element,x)})}_isAnimated(){return this._element.classList.contains(_t)}_triggerBackdropTransition(){if(l.trigger(this._element,j).defaultPrevented)return;const Y=this._element.scrollHeight>document.documentElement.clientHeight,K=this._element.style.overflowY;K==="hidden"||this._element.classList.contains(rt)||(Y||(this._element.style.overflowY="hidden"),this._element.classList.add(rt),this._queueCallback(()=>{this._element.classList.remove(rt),this._queueCallback(()=>{this._element.style.overflowY=K},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const M=this._element.scrollHeight>document.documentElement.clientHeight,Y=this._scrollBar.getWidth(),K=Y>0;if(K&&!M){const lt=S.isRTL()?"paddingLeft":"paddingRight";this._element.style[lt]="".concat(Y,"px")}if(!K&&M){const lt=S.isRTL()?"paddingRight":"paddingLeft";this._element.style[lt]="".concat(Y,"px")}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(M,Y){return this.each(function(){const K=J.getOrCreateInstance(this,M);if(typeof M=="string"){if(typeof K[M]>"u")throw new TypeError('No method named "'.concat(M,'"'));K[M](Y)}})}}return l.on(document,at,pt,function(tt){const M=v.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&tt.preventDefault(),l.one(M,V,lt=>{lt.defaultPrevented||l.one(M,x,()=>{S.isVisible(this)&&this.focus()})});const Y=v.findOne(Dt);Y&&J.getInstance(Y).hide(),J.getOrCreateInstance(M).toggle(this)}),R.enableDismissTrigger(J),S.defineJQueryPlugin(J),J})}(bt)),bt.exports}var oe=ne();const se=qt(oe);let q;class ae{constructor(){this.init()}modalVisible(o="show"){const n=document.getElementById("d_confirm__modal");n&&(this.bsModal||(this.bsModal=new se(n)),o==="show"?this.bsModal.show():this.bsModal.hide())}deleteEvent(){const o=new CustomEvent(q.deleteEventName,{detail:{element:q.deletableItem,status:"OK"}});window.dispatchEvent(o)}loader(o=!1){const n=$("#d_confirm__modal button.delete-btn .spinner-border");o?n.css({display:"inline-block"}):n.hide()}async deleteHandle(){q.loader(!0),q.deleteUrl?await axios.delete(q.deleteUrl).then(o=>{o=o.data,q.deleteEvent(),o.message&&showSuccessMessage(o.message)}):q.deleteEvent(),q.modalVisible("hide"),q.loader()}clickDeletableItem(){q.deletableItem=this,q.modalVisible(),q.deleteUrl=$(this).attr("data-url"),q.deleteEventName=$(this).attr("data-event-name")}$_clicks(){$("body").on("click","button.__confirm__delete__btn",this.clickDeletableItem),$("#d_confirm__modal").on("click","button.delete-btn",this.deleteHandle)}init(){q=this,q.deleteEventName="confirmModalEvent",this.$_clicks()}}new ae;class re{constructor(){this.coreParentClass="core-multiple-inputs"}_addMultipleItem(){const o=this;$(".core-multiple-button").click(function(){const n=$(this).closest(".".concat(o.coreParentClass));n.find("select.select2").length&&n.find("select.select2").select2("destroy");const l=n.find(".group-item:first").clone(),v=l.find("input").length,L=n.find(".group-item").length;v&&($.each(l.find(":input").not("input[type='hidden']").not("button"),(R,A)=>{const S=$(A).closest(".form-group"),W=S.find(".validation-error");if($(A).attr("type")==="file"){const w=$(A).attr("id"),g=$(A).attr("data-name").replace("0",L);$(A).val("").attr("data-name",g);const E=w.replace("0",L);$(A).attr("id",E);const B=l.find('[for="'.concat(w,'"]'));if($(A).closest(".__uploaded__files").remove(),B.length){const H=B[0],j=$(H).attr("for").replace("0",L),x=$(H).attr("data-input").replace("0",L),V=$(H).attr("data-preview").replace("0",L);$(H).attr("for",j),$(H).attr("data-input",x),$(H).attr("data-preview",V)}l.find(".hidden-file-inputs").html(""),l.find(".__uploaded__files").html(""),l.find(".__file__list__default").html("")}else{const w=$(A),g=w.attr("name").replace("0",L),E=l.find('label[for="'.concat(w.attr("id"),'"]'));w.val("").attr("name",g);const B="".concat(w.attr("data-name"),"_").concat(new Date().getTime());E.length&&E.attr("for",B),w.attr("id",B)}const P=W.attr("data-name").replace("0",L);W.attr("data-name",P).removeClass("has-error").text(""),S.removeClass("is-invalid")}),v>1&&l.addClass("grouped"),l.attr("data-index",L),l.append(o._getRemoveIcon()),n.find(".multiple-group-content").append(l)),n.find("select.select2").length&&select2Init(n)})}_deleteMultipleItem(){const o=this;$(document).on("click",".remove-multiple-item",function(){const n=$(this).closest(".core-multiple-inputs");$(this).closest(".group-item").remove(),o._resetInputName(n)})}_resetInputName(o){let n=1;o.find(".group-item:not(:first)").each((l,v)=>{$(v).find(":input").each((L,R)=>{const A=$(v).attr("data-index"),W=$(R).closest(".form-group").find(".validation-error");if($(R).attr("name")){const P=$(R).attr("name").replace(A,n),w=W.attr("data-name").replace(A,n);$(R).attr("name",P),W.attr("data-name",w)}}),$(v).attr("data-index",n),n++})}_getRemoveIcon(){return'<i class="flaticon-circle remove-multiple-item"></i>'}init(){$(".".concat(this.coreParentClass)).length&&(this._addMultipleItem(),this._deleteMultipleItem())}}new re().init();const Tt=new Kt("cropImageModal");class Pt{constructor(){this.init()}init(){this.deleteFileEvent(),this.$_functions()}$_functions(){$("body").on("click",".__delete__file__btn",this.deleteFileHandler.bind(this)),$("input[type=file].temp-file-type").change(this.fileChangeHandle.bind(this))}getAttribute(o){return this.$el.getAttribute("data-".concat(o))}fileChangeHandle(){this.$el=event.target,this.$fileListEl=$(this.$el).siblings("div.__file__list__default"),this.$fileErrorBox=$(this.$el).siblings("div.error-messages-block"),this.$fileHiddenInputsBox=$(this.$el).siblings(".hidden-file-inputs"),this.resetUploader(),this.fileData=this.$el.files,this.filename="",$(this.$el).data("has-crop")?(typeof this.cropContainer>"u"&&(this.initCroppie(),this.cropModalActions()),this.cropperImageChange()):(this.removeOldUploadedFiles(),this.generateFormDataForFiles()),this.$el.value=""}removeOldUploadedFiles(){this.is_multiple=this.$el.getAttribute("multiple")!==null,this.is_multiple||$(this.$el).siblings(".__uploaded__files").remove()}initCroppie(){this.cropContainer=$(".crop-img-container").croppie({enableExif:!0,viewport:{width:200,height:200,type:"circle"},boundary:{width:300,height:300}})}cropperImageChange(){Tt.show();const o=new FileReader;o.onload=n=>{this.cropContainer.croppie("bind",{url:n.target.result})},o.readAsDataURL(this.fileData[0]),this.filename=this.fileData[0].name}cropModalActions(){Tt.save(()=>{this.cropContainer.croppie("result",{type:"canvas",size:"viewport"}).then(o=>{this.removeOldUploadedFiles();const n=new FormData;n.append("config_key","".concat(this.getAttribute("config-key"),".").concat(this.getAttribute("name"))),n.append("file",o),n.append("name",this.filename),this.sendData(n,0),this.inputName=this.getAttribute("name"),Tt.hide()})})}resetUploader(){this.$fileListEl.html(""),this.$fileErrorBox.find("ul").html(""),this.$fileErrorBox.hide(),this.$fileHiddenInputsBox.html("")}generateFormDataForFiles(){if(this.fileData){this.inputName=this.getAttribute("name");const o=this.getAttribute("config-key");for(const[n,l]of Object.entries(this.fileData)){const v=new FormData;v.append("config_key","".concat(o,".").concat(this.inputName)),v.append("file",l),this.sendData(v,n)}}}async sendData(o,n){this.createPreviewBlock(n),await axios.post(route("dashboard.files.storeTempFile"),o,{onUploadProgress:l=>{const v=l.lengthComputable?l.total:l.target.getResponseHeader("content-length")||l.target.getResponseHeader("x-decompressed-content-length");if(v!==null){const L=Math.round(l.loaded*100/v);this.progressBar(L,n)}}}).then(l=>{l=l.data,this.setPreviewValue(l,n),this.appendDeleteBtn(n),this.createHiddenInputs(l)}).catch(l=>{this.errorHandler(l,n),this.appendDeleteBtn(n,!0)})}setPreviewValue(o,n){const l=$(this.$fileListEl).find(".file__item[data-index=".concat(n,"]"));l.addClass("file__item__type__".concat(o.file_type)),l.html(this.createHtmlForFile(o))}appendDeleteBtn(o,n=!1){const l=$(this.$fileListEl).find(".file__item[data-index=".concat(o,"]")),v=' <button class="position-absolute __delete__file __delete__file__btn"\n                    data-index="'.concat(o,'"\n                    data-event-name="deleteFileItemEvent"\n                    type="button"><i class="fas fa-times"></i></button>\n                    ');l.append(v)}createHiddenInputs(o){let n="";this.is_multiple&&(n="[]"),this.$fileHiddenInputsBox.append('<input type="hidden" name="'.concat(this.inputName).concat(n,'" value="').concat(o.name,'">'))}errorHandler(o,n){if($(this.$fileListEl).find(".file__item[data-index=".concat(n,"]")).find(".progress-bar").addClass("bg-danger"),o.response&&o.response.data.errors){this.$fileErrorBox.show(),o=o.response.data;for(const v of Object.entries(o.errors))this.$fileErrorBox.find("ul").append('<li data-index="'.concat(n,'">File :').concat(n," ").concat(v,"</li>"))}}progressBar(o,n){$(this.$fileListEl).find(".file__item[data-index=".concat(n,"] .file__progress .progress-bar")).css({width:"".concat(o,"%")}).attr("aria-valuenow",o).html("".concat(o,"%"))}createPreviewBlock(o){const n='\n            <div class="file__item d-flex justify-content-center position-relative mt-2" data-index="'.concat(o,'">\n                <div class="progress file__progress ">\n                    <div class="progress-bar"\n                         role="progressbar"\n                         style="width: 0%;"\n                         aria-valuenow="0"\n                         aria-valuemin="0"\n                         aria-valuemax="100">\n                        0%\n                    </div>\n                </div>\n            </div>\n    ');this.$fileListEl.append(n)}createHtmlForFile(o){switch(o.file_type){case"image":return'<img src="'.concat(o.file_url,'" alt="').concat(o.original_name,'" class="upload-file-img">');default:return'<span class="mr-5 text-primary p-2">'.concat(o.original_name,"</span>")}}deleteFileHandler(o){const n=o.target,l=$(n).data("index");this.$fileErrorBox.find('ul li[data-index="'.concat(l,'"]')).remove(),this.$fileErrorBox.find("ul li").length||this.$fileErrorBox.hide(),$(n).closest(".file__item").remove(),this.$fileHiddenInputsBox.html(""),this.deleteFileEvent()}deleteFileEvent(){window.addEventListener("deleteFileItemInDbEvent",o=>{const n=o.detail.element;$(n).parents(".__uploaded__files").find(".file__item").length<2&&$(n).parents(".__uploaded__files").remove(),$(n).parents(".file__item").remove()})}}new Pt;window.FileUploader=Pt;(function(y,o){typeof define=="function"&&define.amd?define(o):typeof exports=="object"&&typeof exports.nodeName!="string"?module.exports=o():y.Croppie=o()})(typeof self<"u"?self:void 0,function(){typeof Promise!="function"&&function(t){function e(r,a){return function(){r.apply(a,arguments)}}function i(r){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof r!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],h(r,e(p,this),e(c,this))}function s(r){var a=this;return this._state===null?void this._deferreds.push(r):void m(function(){var u=a._state?r.onFulfilled:r.onRejected;if(u!==null){var d;try{d=u(a._value)}catch(C){return void r.reject(C)}r.resolve(d)}else(a._state?r.resolve:r.reject)(a._value)})}function p(r){try{if(r===this)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var a=r.then;if(typeof a=="function")return void h(e(a,r),e(p,this),e(c,this))}this._state=!0,this._value=r,k.call(this)}catch(u){c.call(this,u)}}function c(r){this._state=!1,this._value=r,k.call(this)}function k(){for(var r=0,a=this._deferreds.length;a>r;r++)s.call(this,this._deferreds[r]);this._deferreds=null}function h(r,a,u){var d=!1;try{r(function(C){d||(d=!0,a(C))},function(C){d||(d=!0,u(C))})}catch(C){if(d)return;d=!0,u(C)}}var f=setTimeout,m=typeof setImmediate=="function"&&setImmediate||function(r){f(r,1)},b=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};i.prototype.catch=function(r){return this.then(null,r)},i.prototype.then=function(r,a){var u=this;return new i(function(d,C){s.call(u,new function(I,N,D,_){this.onFulfilled=typeof I=="function"?I:null,this.onRejected=typeof N=="function"?N:null,this.resolve=D,this.reject=_}(r,a,d,C))})},i.all=function(){var r=Array.prototype.slice.call(arguments.length===1&&b(arguments[0])?arguments[0]:arguments);return new i(function(a,u){function d(N,D){try{if(D&&(typeof D=="object"||typeof D=="function")){var _=D.then;if(typeof _=="function")return void _.call(D,function(F){d(N,F)},u)}r[N]=D,--C==0&&a(r)}catch(F){u(F)}}if(r.length===0)return a([]);for(var C=r.length,I=0;I<r.length;I++)d(I,r[I])})},i.resolve=function(r){return r&&typeof r=="object"&&r.constructor===i?r:new i(function(a){a(r)})},i.reject=function(r){return new i(function(a,u){u(r)})},i.race=function(r){return new i(function(a,u){for(var d=0,C=r.length;C>d;d++)r[d].then(a,u)})},i._setImmediateFn=function(r){m=r},typeof module<"u"&&module.exports?module.exports=i:t.Promise||(t.Promise=i)}(this),typeof window<"u"&&typeof window.CustomEvent!="function"&&function(){function t(e,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var s=document.createEvent("CustomEvent");return s.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),s}t.prototype=window.Event.prototype,window.CustomEvent=t}(),typeof HTMLCanvasElement>"u"||HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,i){for(var s=atob(this.toDataURL(e,i).split(",")[1]),p=s.length,c=new Uint8Array(p),k=0;k<p;k++)c[k]=s.charCodeAt(k);t(new Blob([c],{type:e||"image/png"}))}});var y,o,n,l=["Webkit","Moz","ms"],v=typeof document<"u"?document.createElement("div").style:{},L=[1,8,3,6],R=[2,7,4,5];function A(t){if(t in v)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=l.length;i--;)if((t=l[i]+e)in v)return t}function S(t,e){t=t||{};for(var i in e)e[i]&&e[i].constructor&&e[i].constructor===Object?(t[i]=t[i]||{},S(t[i],e[i])):t[i]=e[i];return t}function W(t){return S({},t)}function P(t){if("createEvent"in document){var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),t.dispatchEvent(e)}else t.fireEvent("onchange")}function w(t,e,i){if(typeof e=="string"){var s=e;(e={})[s]=i}for(var p in e)t.style[p]=e[p]}function g(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function E(t,e){for(var i in e)t.setAttribute(i,e[i])}function B(t){return parseInt(t,10)}function H(t,e){var i=t.naturalWidth,s=t.naturalHeight,p=e||Q(t);if(p&&p>=5){var c=i;i=s,s=c}return{width:i,height:s}}o=A("transform"),y=A("transformOrigin"),n=A("userSelect");var j={translate3d:{suffix:", 0px"},translate:{suffix:""}},x=function(t,e,i){this.x=parseFloat(t),this.y=parseFloat(e),this.scale=parseFloat(i)};x.parse=function(t){return t.style?x.parse(t.style[o]):t.indexOf("matrix")>-1||t.indexOf("none")>-1?x.fromMatrix(t):x.fromString(t)},x.fromMatrix=function(t){var e=t.substring(7).split(",");return e.length&&t!=="none"||(e=[1,0,0,1,0,0]),new x(B(e[4]),B(e[5]),parseFloat(e[0]))},x.fromString=function(t){var e=t.split(") "),i=e[0].substring(et.globals.translate.length+1).split(","),s=e.length>1?e[1].substring(6):1,p=i.length>1?i[0]:0,c=i.length>1?i[1]:0;return new x(p,c,s)},x.prototype.toString=function(){var t=j[et.globals.translate].suffix||"";return et.globals.translate+"("+this.x+"px, "+this.y+"px"+t+") scale("+this.scale+")"};var V=function(t){if(!t||!t.style[y])return this.x=0,void(this.y=0);var e=t.style[y].split(" ");this.x=parseFloat(e[0]),this.y=parseFloat(e[1])};function Q(t){return t.exifdata&&t.exifdata.Orientation?B(t.exifdata.Orientation):1}function vt(t,e,i){var s=e.width,p=e.height,c=t.getContext("2d");switch(t.width=e.width,t.height=e.height,c.save(),i){case 2:c.translate(s,0),c.scale(-1,1);break;case 3:c.translate(s,p),c.rotate(180*Math.PI/180);break;case 4:c.translate(0,p),c.scale(1,-1);break;case 5:t.width=p,t.height=s,c.rotate(90*Math.PI/180),c.scale(1,-1);break;case 6:t.width=p,t.height=s,c.rotate(90*Math.PI/180),c.translate(0,-p);break;case 7:t.width=p,t.height=s,c.rotate(-90*Math.PI/180),c.translate(-s,p),c.scale(1,-1);break;case 8:t.width=p,t.height=s,c.translate(0,s),c.rotate(-90*Math.PI/180)}c.drawImage(e,0,0,s,p),c.restore()}function kt(){var t,e,i,s,p,c,k=this.options.viewport.type?"cr-vp-"+this.options.viewport.type:null;this.options.useCanvas=this.options.enableOrientation||dt.call(this),this.data={},this.elements={},t=this.elements.boundary=document.createElement("div"),i=this.elements.viewport=document.createElement("div"),e=this.elements.img=document.createElement("img"),s=this.elements.overlay=document.createElement("div"),this.options.useCanvas?(this.elements.canvas=document.createElement("canvas"),this.elements.preview=this.elements.canvas):this.elements.preview=e,g(t,"cr-boundary"),t.setAttribute("aria-dropeffect","none"),p=this.options.boundary.width,c=this.options.boundary.height,w(t,{width:p+(isNaN(p)?"":"px"),height:c+(isNaN(c)?"":"px")}),g(i,"cr-viewport"),k&&g(i,k),w(i,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),i.setAttribute("tabindex",0),g(this.elements.preview,"cr-image"),E(this.elements.preview,{alt:"preview","aria-grabbed":"false"}),g(s,"cr-overlay"),this.element.appendChild(t),t.appendChild(this.elements.preview),t.appendChild(i),t.appendChild(s),g(this.element,"croppie-container"),this.options.customClass&&g(this.element,this.options.customClass),(function(){var h,f,m,b,r,a=this,u=!1;function d(_,F){var T=a.elements.preview.getBoundingClientRect(),O=r.y+F,z=r.x+_;a.options.enforceBoundary?(b.top>T.top+F&&b.bottom<T.bottom+F&&(r.y=O),b.left>T.left+_&&b.right<T.right+_&&(r.x=z)):(r.y=O,r.x=z)}function C(_){a.elements.preview.setAttribute("aria-grabbed",_),a.elements.boundary.setAttribute("aria-dropeffect",_?"move":"none")}function I(_){if((_.button===void 0||_.button===0)&&(_.preventDefault(),!u)){if(u=!0,h=_.pageX,f=_.pageY,_.touches){var F=_.touches[0];h=F.pageX,f=F.pageY}C(u),r=x.parse(a.elements.preview),window.addEventListener("mousemove",N),window.addEventListener("touchmove",N),window.addEventListener("mouseup",D),window.addEventListener("touchend",D),document.body.style[n]="none",b=a.elements.viewport.getBoundingClientRect()}}function N(_){_.preventDefault();var F=_.pageX,T=_.pageY;if(_.touches){var O=_.touches[0];F=O.pageX,T=O.pageY}var z=F-h,it=T-f,U={};if(_.type==="touchmove"&&_.touches.length>1){var Z=_.touches[0],X=_.touches[1],G=Math.sqrt((Z.pageX-X.pageX)*(Z.pageX-X.pageX)+(Z.pageY-X.pageY)*(Z.pageY-X.pageY));m||(m=G/a._currentZoom);var ht=G/m;return nt.call(a,ht),void P(a.elements.zoomer)}d(z,it),U[o]=r.toString(),w(a.elements.preview,U),ot.call(a),f=T,h=F}function D(){C(u=!1),window.removeEventListener("mousemove",N),window.removeEventListener("touchmove",N),window.removeEventListener("mouseup",D),window.removeEventListener("touchend",D),document.body.style[n]="",at.call(a),st.call(a),m=0}a.elements.overlay.addEventListener("mousedown",I),a.elements.viewport.addEventListener("keydown",function(_){var F=37,T=38,O=39,z=40;if(!_.shiftKey||_.keyCode!==T&&_.keyCode!==z){if(a.options.enableKeyMovement&&_.keyCode>=37&&_.keyCode<=40){_.preventDefault();var it=function(Z){switch(Z){case F:return[1,0];case T:return[0,1];case O:return[-1,0];case z:return[0,-1]}}(_.keyCode);r=x.parse(a.elements.preview),document.body.style[n]="none",b=a.elements.viewport.getBoundingClientRect(),function(Z){var X=Z[0],G=Z[1],ht={};d(X,G),ht[o]=r.toString(),w(a.elements.preview,ht),ot.call(a),document.body.style[n]="",at.call(a),st.call(a),m=0}(it)}}else{var U;U=_.keyCode===T?parseFloat(a.elements.zoomer.value)+parseFloat(a.elements.zoomer.step):parseFloat(a.elements.zoomer.value)-parseFloat(a.elements.zoomer.step),a.setZoom(U)}}),a.elements.overlay.addEventListener("touchstart",I)}).call(this),this.options.enableZoom&&(function(){var h=this,f=h.elements.zoomerWrap=document.createElement("div"),m=h.elements.zoomer=document.createElement("input");function b(){(function(a){var u=this,d=a?a.transform:x.parse(u.elements.preview),C=a?a.viewportRect:u.elements.viewport.getBoundingClientRect(),I=a?a.origin:new V(u.elements.preview);function N(){var T={};T[o]=d.toString(),T[y]=I.toString(),w(u.elements.preview,T)}if(u._currentZoom=a?a.value:u._currentZoom,d.scale=u._currentZoom,u.elements.zoomer.setAttribute("aria-valuenow",u._currentZoom),N(),u.options.enforceBoundary){var D=(function(T){var O=this._currentZoom,z=T.width,it=T.height,U=this.elements.boundary.clientWidth/2,Z=this.elements.boundary.clientHeight/2,X=this.elements.preview.getBoundingClientRect(),G=X.width,ht=X.height,It=z/2,Mt=it/2,Nt=-1*(It/O-U),Lt=-1*(Mt/O-Z),St=1/O*It,Bt=1/O*Mt;return{translate:{maxX:Nt,minX:Nt-(G*(1/O)-z*(1/O)),maxY:Lt,minY:Lt-(ht*(1/O)-it*(1/O))},origin:{maxX:G*(1/O)-St,minX:St,maxY:ht*(1/O)-Bt,minY:Bt}}}).call(u,C),_=D.translate,F=D.origin;d.x>=_.maxX&&(I.x=F.minX,d.x=_.maxX),d.x<=_.minX&&(I.x=F.maxX,d.x=_.minX),d.y>=_.maxY&&(I.y=F.minY,d.y=_.maxY),d.y<=_.minY&&(I.y=F.maxY,d.y=_.minY)}N(),Dt.call(u),st.call(u)}).call(h,{value:parseFloat(m.value),origin:new V(h.elements.preview),viewportRect:h.elements.viewport.getBoundingClientRect(),transform:x.parse(h.elements.preview)})}function r(a){var u,d;if(h.options.mouseWheelZoom==="ctrl"&&a.ctrlKey!==!0)return 0;u=a.wheelDelta?a.wheelDelta/1200:a.deltaY?a.deltaY/1060:a.detail?a.detail/-60:0,d=h._currentZoom+u*h._currentZoom,a.preventDefault(),nt.call(h,d),b.call(h)}g(f,"cr-slider-wrap"),g(m,"cr-slider"),m.type="range",m.step="0.0001",m.value="1",m.style.display=h.options.showZoomer?"":"none",m.setAttribute("aria-label","zoom"),h.element.appendChild(f),f.appendChild(m),h._currentZoom=1,h.elements.zoomer.addEventListener("input",b),h.elements.zoomer.addEventListener("change",b),h.options.mouseWheelZoom&&(h.elements.boundary.addEventListener("mousewheel",r),h.elements.boundary.addEventListener("DOMMouseScroll",r))}).call(this),this.options.enableResize&&(function(){var h,f,m,b,r,a,u,d=this,C=document.createElement("div"),I=!1,N=50;g(C,"cr-resizer"),w(C,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),this.options.resizeControls.height&&(g(a=document.createElement("div"),"cr-resizer-vertical"),C.appendChild(a)),this.options.resizeControls.width&&(g(u=document.createElement("div"),"cr-resizer-horisontal"),C.appendChild(u));function D(T){if((T.button===void 0||T.button===0)&&(T.preventDefault(),!I)){var O=d.elements.overlay.getBoundingClientRect();if(I=!0,f=T.pageX,m=T.pageY,h=T.currentTarget.className.indexOf("vertical")!==-1?"v":"h",b=O.width,r=O.height,T.touches){var z=T.touches[0];f=z.pageX,m=z.pageY}window.addEventListener("mousemove",_),window.addEventListener("touchmove",_),window.addEventListener("mouseup",F),window.addEventListener("touchend",F),document.body.style[n]="none"}}function _(T){var O=T.pageX,z=T.pageY;if(T.preventDefault(),T.touches){var it=T.touches[0];O=it.pageX,z=it.pageY}var U=O-f,Z=z-m,X=d.options.viewport.height+Z,G=d.options.viewport.width+U;h==="v"&&X>=N&&X<=r?(w(C,{height:X+"px"}),d.options.boundary.height+=Z,w(d.elements.boundary,{height:d.options.boundary.height+"px"}),d.options.viewport.height+=Z,w(d.elements.viewport,{height:d.options.viewport.height+"px"})):h==="h"&&G>=N&&G<=b&&(w(C,{width:G+"px"}),d.options.boundary.width+=U,w(d.elements.boundary,{width:d.options.boundary.width+"px"}),d.options.viewport.width+=U,w(d.elements.viewport,{width:d.options.viewport.width+"px"})),ot.call(d),mt.call(d),at.call(d),st.call(d),m=z,f=O}function F(){I=!1,window.removeEventListener("mousemove",_),window.removeEventListener("touchmove",_),window.removeEventListener("mouseup",F),window.removeEventListener("touchend",F),document.body.style[n]=""}a&&(a.addEventListener("mousedown",D),a.addEventListener("touchstart",D)),u&&(u.addEventListener("mousedown",D),u.addEventListener("touchstart",D)),this.elements.boundary.appendChild(C)}).call(this)}function dt(){return this.options.enableExif&&window.EXIF}function nt(t){if(this.options.enableZoom){var e=this.elements.zoomer,i=tt(t,4);e.value=Math.max(parseFloat(e.min),Math.min(parseFloat(e.max),i)).toString()}}function at(t){var e=this._currentZoom,i=this.elements.preview.getBoundingClientRect(),s=this.elements.viewport.getBoundingClientRect(),p=x.parse(this.elements.preview.style[o]),c=new V(this.elements.preview),k=s.top-i.top+s.height/2,h=s.left-i.left+s.width/2,f={},m={};if(t){var b=c.x,r=c.y,a=p.x,u=p.y;f.y=b,f.x=r,p.y=a,p.x=u}else f.y=k/e,f.x=h/e,m.y=(f.y-c.y)*(1-e),m.x=(f.x-c.x)*(1-e),p.x-=m.x,p.y-=m.y;var d={};d[y]=f.x+"px "+f.y+"px",d[o]=p.toString(),w(this.elements.preview,d)}function ot(){if(this.elements){var t=this.elements.boundary.getBoundingClientRect(),e=this.elements.preview.getBoundingClientRect();w(this.elements.overlay,{width:e.width+"px",height:e.height+"px",top:e.top-t.top+"px",left:e.left-t.left+"px"})}}V.prototype.toString=function(){return this.x+"px "+this.y+"px"};var _t,ut,rt,Dt=(_t=ot,ut=500,function(){var t=this,e=arguments;clearTimeout(rt),rt=setTimeout(function(){rt=null,_t.apply(t,e)},ut)});function st(){var t,e=this.get();wt.call(this)&&(this.options.update.call(this,e),this.$&&typeof Prototype>"u"?this.$(this.element).trigger("update.croppie",e):(window.CustomEvent?t=new CustomEvent("update",{detail:e}):(t=document.createEvent("CustomEvent")).initCustomEvent("update",!0,!0,e),this.element.dispatchEvent(t)))}function wt(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function pt(){var t,e={},i=this.elements.preview,s=new x(0,0,1),p=new V;wt.call(this)&&!this.data.bound&&(this.data.bound=!0,e[o]=s.toString(),e[y]=p.toString(),e.opacity=1,w(i,e),t=this.elements.preview.getBoundingClientRect(),this._originalImageWidth=t.width,this._originalImageHeight=t.height,this.data.orientation=dt.call(this)?Q(this.elements.img):this.data.orientation,this.options.enableZoom?mt.call(this,!0):this._currentZoom=1,s.scale=this._currentZoom,e[o]=s.toString(),w(i,e),this.data.points.length?(function(c){if(c.length!==4)throw"Croppie - Invalid number of points supplied: "+c;var k=c[2]-c[0],h=this.elements.viewport.getBoundingClientRect(),f=this.elements.boundary.getBoundingClientRect(),m={left:h.left-f.left,top:h.top-f.top},b=h.width/k,r=c[1],a=c[0],u=-1*c[1]+m.top,d=-1*c[0]+m.left,C={};C[y]=a+"px "+r+"px",C[o]=new x(d,u,b).toString(),w(this.elements.preview,C),nt.call(this,b),this._currentZoom=b}).call(this,this.data.points):(function(){var c=this.elements.preview.getBoundingClientRect(),k=this.elements.viewport.getBoundingClientRect(),h=this.elements.boundary.getBoundingClientRect(),f=k.left-h.left,m=k.top-h.top,b=f-(c.width-k.width)/2,r=m-(c.height-k.height)/2,a=new x(b,r,this._currentZoom);w(this.elements.preview,o,a.toString())}).call(this),at.call(this),ot.call(this))}function mt(t){var e,i,s,p,c=Math.max(this.options.minZoom,0)||0,k=this.options.maxZoom||1.5,h=this.elements.zoomer,f=parseFloat(h.value),m=this.elements.boundary.getBoundingClientRect(),b=H(this.elements.img,this.data.orientation),r=this.elements.viewport.getBoundingClientRect();this.options.enforceBoundary&&(s=r.width/b.width,p=r.height/b.height,c=Math.max(s,p)),c>=k&&(k=c+1),h.min=tt(c,4),h.max=tt(k,4),!t&&(f<h.min||f>h.max)?nt.call(this,f<h.min?h.min:h.max):t&&(i=Math.max(m.width/b.width,m.height/b.height),e=this.data.boundZoom!==null?this.data.boundZoom:i,nt.call(this,e)),P(h)}function ft(t){var e=t.points,i=B(e[0]),s=B(e[1]),p=B(e[2])-i,c=B(e[3])-s,k=t.circle,h=document.createElement("canvas"),f=h.getContext("2d"),m=t.outputWidth||p,b=t.outputHeight||c;h.width=m,h.height=b,t.backgroundColor&&(f.fillStyle=t.backgroundColor,f.fillRect(0,0,m,b));var r=i,a=s,u=p,d=c,C=0,I=0,N=m,D=b;return i<0&&(r=0,C=Math.abs(i)/p*m),u+r>this._originalImageWidth&&(N=(u=this._originalImageWidth-r)/p*m),s<0&&(a=0,I=Math.abs(s)/c*b),d+a>this._originalImageHeight&&(D=(d=this._originalImageHeight-a)/c*b),f.drawImage(this.elements.preview,r,a,u,d,C,I,N,D),k&&(f.fillStyle="#fff",f.globalCompositeOperation="destination-in",f.beginPath(),f.arc(h.width/2,h.height/2,h.width/2,0,2*Math.PI,!0),f.closePath(),f.fill()),h}function J(t,e){var i,s=this,p=[],c=null,k=dt.call(s);if(typeof t=="string")i=t,t={};else if(Array.isArray(t))p=t.slice();else{if(t===void 0&&s.data.url)return pt.call(s),st.call(s),null;i=t.url,p=t.points||[],c=t.zoom===void 0?null:t.zoom}return s.data.bound=!1,s.data.url=i||s.data.url,s.data.boundZoom=c,function(h,f){if(!h)throw"Source image missing";var m=new Image;return m.style.opacity="0",new Promise(function(b,r){function a(){m.style.opacity="1",setTimeout(function(){b(m)},1)}m.removeAttribute("crossOrigin"),h.match(/^https?:\/\/|^\/\//)&&m.setAttribute("crossOrigin","anonymous"),m.onload=function(){f?EXIF.getData(m,function(){a()}):a()},m.onerror=function(u){m.style.opacity=1,setTimeout(function(){r(u)},1)},m.src=h})}(i,k).then(function(h){if((function(N){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,function(D){N.classList.add(D)}),this.elements.img.parentNode.replaceChild(N,this.elements.img),this.elements.preview=N),this.elements.img=N}).call(s,h),p.length)s.options.relative&&(p=[p[0]*h.naturalWidth/100,p[1]*h.naturalHeight/100,p[2]*h.naturalWidth/100,p[3]*h.naturalHeight/100]);else{var f,m,b=H(h),r=s.elements.viewport.getBoundingClientRect(),a=r.width/r.height;b.width/b.height>a?f=(m=b.height)*a:(f=b.width,m=b.height/a);var u=(b.width-f)/2,d=(b.height-m)/2,C=u+f,I=d+m;s.data.points=[u,d,C,I]}s.data.orientation=t.orientation||1,s.data.points=p.map(function(N){return parseFloat(N)}),s.options.useCanvas&&(function(N){var D=this.elements.canvas,_=this.elements.img;D.getContext("2d").clearRect(0,0,D.width,D.height),D.width=_.width,D.height=_.height,vt(D,_,this.options.enableOrientation&&N||Q(_))}).call(s,s.data.orientation),pt.call(s),st.call(s),e&&e()})}function tt(t,e){return parseFloat(t).toFixed(e||0)}function M(){var t=this.elements.preview.getBoundingClientRect(),e=this.elements.viewport.getBoundingClientRect(),i=e.left-t.left,s=e.top-t.top,p=(e.width-this.elements.viewport.offsetWidth)/2,c=(e.height-this.elements.viewport.offsetHeight)/2,k=i+this.elements.viewport.offsetWidth+p,h=s+this.elements.viewport.offsetHeight+c,f=this._currentZoom;(f===1/0||isNaN(f))&&(f=1);var m=this.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return i=Math.max(m,i/f),s=Math.max(m,s/f),k=Math.max(m,k/f),h=Math.max(m,h/f),{points:[tt(i),tt(s),tt(k),tt(h)],zoom:f,orientation:this.data.orientation}}var Y={type:"canvas",format:"png",quality:1},K=["jpeg","webp","png"];function lt(t){var e=this,i=M.call(e),s=S(W(Y),W(t)),p=typeof t=="string"?t:s.type||"base64",c=s.size||"viewport",k=s.format,h=s.quality,f=s.backgroundColor,m=typeof s.circle=="boolean"?s.circle:e.options.viewport.type==="circle",b=e.elements.viewport.getBoundingClientRect(),r=b.width/b.height;return c==="viewport"?(i.outputWidth=b.width,i.outputHeight=b.height):typeof c=="object"&&(c.width&&c.height?(i.outputWidth=c.width,i.outputHeight=c.height):c.width?(i.outputWidth=c.width,i.outputHeight=c.width/r):c.height&&(i.outputWidth=c.height*r,i.outputHeight=c.height)),K.indexOf(k)>-1&&(i.format="image/"+k,i.quality=h),i.circle=m,i.url=e.data.url,i.backgroundColor=f,new Promise(function(a){switch(p.toLowerCase()){case"rawcanvas":a(ft.call(e,i));break;case"canvas":case"base64":a((function(u){return ft.call(this,u).toDataURL(u.format,u.quality)}).call(e,i));break;case"blob":(function(u){var d=this;return new Promise(function(C){ft.call(d,u).toBlob(function(I){C(I)},u.format,u.quality)})}).call(e,i).then(a);break;default:a((function(u){var d=u.points,C=document.createElement("div"),I=document.createElement("img"),N=d[2]-d[0],D=d[3]-d[1];return g(C,"croppie-result"),C.appendChild(I),w(I,{left:-1*d[0]+"px",top:-1*d[1]+"px"}),I.src=u.url,w(C,{width:N+"px",height:D+"px"}),C}).call(e,i))}})}function zt(t){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var e,i,s,p,c,k=this.elements.canvas;if(this.data.orientation=(e=this.data.orientation,i=t,s=L.indexOf(e)>-1?L:R,p=s.indexOf(e),c=i/90%s.length,s[(s.length+p+c%s.length)%s.length]),vt(k,this.elements.img,this.data.orientation),at.call(this,!0),mt.call(this),Math.abs(t)/90%2==1){var h=this._originalImageHeight,f=this._originalImageWidth;this._originalImageWidth=h,this._originalImageHeight=f}}if(typeof window<"u"&&window.jQuery){var ct=window.jQuery;ct.fn.croppie=function(t){if(typeof t=="string"){var e=Array.prototype.slice.call(arguments,1),i=ct(this).data("croppie");return t==="get"?i.get():t==="result"?i.result.apply(i,e):t==="bind"?i.bind.apply(i,e):this.each(function(){var s=ct(this).data("croppie");if(s){var p=s[t];if(!ct.isFunction(p))throw"Croppie "+t+" method not found";p.apply(s,e),t==="destroy"&&ct(this).removeData("croppie")}})}return this.each(function(){var s=new et(this,t);s.$=ct,ct(this).data("croppie",s)})}}function et(t,e){if(t.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");if(this.element=t,this.options=S(W(et.defaults),e),this.element.tagName.toLowerCase()==="img"){var i=this.element;g(i,"cr-original-image"),E(i,{"aria-hidden":"true",alt:""});var s=document.createElement("div");this.element.parentNode.appendChild(s),s.appendChild(i),this.element=s,this.options.url=this.options.url||i.src}if(kt.call(this),this.options.url){var p={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,J.call(this,p)}}return et.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}},et.globals={translate:"translate3d"},S(et.prototype,{bind:function(t,e){return J.call(this,t,e)},get:function(){var t=M.call(this),e=t.points;return this.options.relative&&(e[0]/=this.elements.img.naturalWidth/100,e[1]/=this.elements.img.naturalHeight/100,e[2]/=this.elements.img.naturalWidth/100,e[3]/=this.elements.img.naturalHeight/100),t},result:function(t){return lt.call(this,t)},refresh:function(){return(function(){pt.call(this)}).call(this)},setZoom:function(t){nt.call(this,t),P(this.elements.zoomer)},rotate:function(t){zt.call(this,t)},destroy:function(){return(function(){var t,e;this.element.removeChild(this.elements.boundary),t=this.element,e="croppie-container",t.classList?t.classList.remove(e):t.className=t.className.replace(e,""),this.options.enableZoom&&this.element.removeChild(this.elements.zoomerWrap),delete this.elements}).call(this)}}),et});window.CKEditors={};alert(111111111);function le(y=".ckeditor5"){const o=document.querySelectorAll(y);alert(22222222),o.forEach(n=>{const l=n.getAttribute("id");l&&window.ClassicEditor.create(n,{}).then(v=>{n.hasAttribute("disabled")&&(v.isReadOnly=!0),v.model.document.on("change:data",()=>{v.updateSourceElement()}),console.log(l,11111111),window.CKEditors[l]=v}).catch(v=>{console.error("Ошибка при инициализации CKEditor:",v)})})}$(function(){de(),ue(),pe(),ce(),me(),fe(),ge(),he()});window.showSuccessMessage=function(y){$.toast({text:y,hideAfter:2e3,position:"top-right",stack:!1,loader:!1,icon:"success",allowToastClose:!1})};window.showErrorMessage=function(y){$.toast({heading:"Error",hideAfter:2e3,text:y,position:"top-right",stack:!1,loader:!1,icon:"error",allowToastClose:!1})};function ce(y=void 0,o="select2"){let n=$("select.".concat(o));typeof y<"u"&&(n=y.find("select.".concat(o))),$.each(n,function(){$(this).select2({placeholder:$trans("__dashboard.select.option.default"),minimumResultsForSearch:10,tags:$(this).data("allow-tags")||!1,allowClear:$(this).data("allow-clear")||!1})})}function he(){$(".brand-toggle").click(()=>{$(".page").toggleClass("minimaize-menu")}),$(".open-menu").click(()=>{$(".page").toggleClass("left-menu-opened"),$(".open-menu").toggleClass("open-menu-opened")})}function de(){le(),document.querySelectorAll(".ckeditor5").forEach(o=>{ClassicEditor.create(o,{cloudServices:{tokenUrl:"https://33333.cke-cs.com/token/dev/ijrDsqFix838Gh3wGO3F77FSW94BwcLXprJ4APSp3XQ26xsUHTi0jcb1hoBt",uploadUrl:"https://33333.cke-cs.com/easyimage/upload/"}}).then(n=>{$(o).attr("disabled")&&(n.isReadOnly=!0),n.model.document.on("change:data",(l,v)=>{n.updateSourceElement()})}).catch(n=>{console.error(n)})})}function ue(){const y=$(".datepicker");y.length&&$.each(y,function(){const o=$(this);o.datetimepicker({timepicker:!1,format:"d.m.Y",scrollMonth:!1,scrollInput:!1,onChangeDateTime(n,l){let v="";l.val()&&(v=moment(l.val(),"DD.MM.YYYY").format($dashboardDates.js.date_format)),o.siblings(".backend-date-value").val(v)}})})}function pe(){const y=$(".datetimepicker");y.length&&$.each(y,function(){const o=$(this);o.datetimepicker({format:"d.m.Y H:i",onChangeDateTime(n,l){let v="";l.val()&&(v=moment(l.val(),"DD.MM.YYYY HH:mm").format($dashboardDates.js.date_time_format)),o.siblings(".backend-date-value").val(v)}})})}function me(){$(".open-menu").click(()=>{$(".page").toggleClass("left-menu-opened"),$(".open-menu").toggleClass("open-menu-opened")})}function fe(){const y=$(".copy-ml-info-btn");y.length&&y.click(function(){const o=$(this),n=o.closest(".tab-pane").find(":input"),l=$("#__mls__tab__".concat(o.data("to-lang-code")));o.prop("disabled",!0),$.each(n,function(){const v=$(this).attr("name");if(v){const L=v.replace(o.data("current-lang-code"),o.data("to-lang-code")),R=l.find('*[name="'.concat(L,'"]'));if(R.length)if(R.hasClass("ckeditor5")){const A=R.attr("id"),S=window.CKEditors[A];console.log(window),S&&S.setData($(this).val())}else R.val($(this).val());setTimeout(()=>{o.prop("disabled",!1)},120)}})})}function ge(){const y=localStorage.getItem("_message");y&&showSuccessMessage(y),localStorage.removeItem("_message")}export{ve as __vite_legacy_guard};
//# sourceMappingURL=bundle.js.map
