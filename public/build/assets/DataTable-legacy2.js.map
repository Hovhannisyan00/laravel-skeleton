{"version":3,"file":"DataTable-legacy2.js","sources":["../../../resources/js/core/DataTable.js"],"sourcesContent":["const SEARCH_LOCALSTORAGE_KEY = 'datatable_search_values';\nconst SEARCH_DATATABLE_STATE_KEY = 'datatable_search_state';\n\n// eslint-disable-next-line no-unused-vars\nexport class DataTable {\n  constructor(options = {}, tableId = '#__data__table') {\n    this.initVariables(options, tableId);\n    this.setSearchStoredData();\n    this.columnDefaultRender(options);\n    this.init();\n  }\n\n  initVariables(options, tableId) {\n    this.tableId = tableId;\n    this.tableEl = $(tableId);\n    this.options = options;\n    this.searchFormId = options.searchFormId ?? 'dataTable__search__form';\n    this.searchFormEl = $(`#${this.searchFormId}`);\n    this.searchData = {};\n    this.pathOptions = options.pathOptions;\n  }\n\n  columnDefaultRender(options) {\n    const showStatusRender = {\n      show_status: {\n        render(showStatus) {\n          return `<span class=\"show-status-${showStatus}\">${$trans(`__dashboard.select.option.show_status_${showStatus}`)}</span>`;\n        },\n      },\n    };\n\n    options.columnsRender = { ...showStatusRender, ...options.columnsRender };\n  }\n\n  storeSearchData() {\n    return this.options.storeSearchData ?? true;\n  }\n\n  actions() {\n    const replaceId = (id, type) => this.pathOptions[`${type}Path`].replace(':id', id);\n\n    const self = this;\n    const defaultActions = {\n      edit(row) {\n        return `<a href=\"${replaceId(row.id, 'edit')}\" class=\"btn\" title=\"Edit\">\n                    <i class=\"flaticon-edit\"></i>\n                </a>`;\n      },\n\n      show(row) {\n        return `<a href=\"${replaceId(row.id, 'show')}\" class=\"btn\" title=\"Show\">\n                   <i class=\"flaticon-eye\"></i>\n                </a>`;\n      },\n\n      clone(row) {\n        if (self.pathOptions.clonePath) {\n          return `<a href=\"${replaceId(row.id, 'clone')}\" class=\"btn\" title=\"Duplicate\">\n                   <i class=\"fas fa-copy fa-fw\"></i>\n                </a>`;\n        }\n\n        return '';\n      },\n\n      delete(row) {\n        if (typeof row.canDelete !== 'undefined' && !row.canDelete) {\n          return '';\n        }\n\n        return `<button type=\"button\" data-url=\"${replaceId(row.id, 'delete')}\" data-event-name=\"deleteDataTableRow\" class=\"btn __confirm__delete__btn\" title=\"Delete\">\n                    <i class=\"flaticon2-trash\"></i>\n                </button>`;\n      },\n    };\n\n    this.options.actions = { ...defaultActions, ...this.options.actions };\n  }\n\n  renderActions(data, type, row, meta) {\n    let actions = '';\n    // eslint-disable-next-line no-restricted-syntax\n    for (const [key, func] of Object.entries(this.options.actions)) {\n      if (typeof func !== 'boolean') actions += func(row);\n    }\n    return `<div class=\"text-center table-buttons\">${actions}</div>`;\n  }\n\n  columnRenderRelation(column) {\n    const columnName = column.data;\n    if (this.options.relations && this.options.relations[columnName]) {\n      const relationName = this.options.relations[columnName];\n      column.render = (data) => {\n        let text = '';\n\n        if (data && !Array.isArray(data)) {\n          // if relation is objected\n          if (typeof relationName !== 'string') {\n            const relationKey = Object.keys(relationName)[0] || '';\n\n            if (data[relationKey]) {\n              return data[relationKey][relationName[relationKey]];\n            }\n          }\n\n          return data[relationName] || '';\n        }\n\n        if (Array.isArray(data)) {\n          data.map((item, index) => {\n            if (typeof relationName !== 'string') {\n              const relationKey = Object.keys(relationName)[0] || '';\n              if (item[relationKey]) {\n                const relVal = item[relationKey][relationName[relationKey]];\n                text += index ? `, ${relVal}` : relVal;\n              }\n            } else {\n              text += index ? `, ${item[relationName]}` : item[relationName];\n            }\n          });\n\n          return text;\n        }\n\n        return '';\n      };\n    }\n    return column;\n  }\n\n  actionsColumn() {\n    return {\n      data: null,\n      orderable: false,\n      sortable: false,\n      render: this.renderActions.bind(this),\n    };\n  }\n\n  mapTableColumns(columns = []) {\n    const fields = this.tableEl.find('thead th');\n    // eslint-disable-next-line array-callback-return\n    fields.map((key, field) => {\n      const columnName = $(field).data('key');\n      let column = {\n        data: columnName,\n        name: columnName,\n        orderable: $(field).data('orderable') ?? true,\n      };\n\n      const { columnsRender } = this.options;\n\n      if (columnsRender && columnsRender[columnName]) {\n        column = { ...column, ...columnsRender[column.data] };\n      }\n\n      if (columnName) {\n        columns.push(this.columnRenderRelation(column));\n      }\n    });\n    return columns;\n  }\n\n  getAndGenerateColumns() {\n    const columns = this.mapTableColumns();\n    if (typeof this.options.noActions === 'undefined' || !this.options.noActions) {\n      columns.push(this.actionsColumn());\n    }\n    return columns;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  generateRequestData(data) {\n    let orderColumn = data.order[0];\n   /* if (this.options.order) {\n      orderColumn = {\n        column: this.options.order[0][0],\n        dir: this.options.order[0][1],\n      };\n    }*/\n\n    return {\n      'order[sort_by]': data.columns[orderColumn.column].name,\n      'order[sort_desc]': orderColumn.dir,\n      perPage: data.length,\n      start: data.start,\n      ...this.searchData,\n    };\n  }\n\n  async ajaxSend(data, callback) {\n    this.resetForm();\n    const searchInput = this.getDefaultSearchInputField();\n    if (searchInput.val() && searchInput.val().trim()) {\n      searchInput.prop('readOnly', true);\n    }\n\n    // eslint-disable-next-line no-undef\n    await axios(this.pathOptions.searchPath, { params: this.generateRequestData(data) })\n      .then((resp) => {\n        callback(resp.data);\n\n        if (this.options.beforeSendRequest) {\n          this.options.beforeSendRequest(resp.data);\n        }\n      }).catch((err) => {\n        this.errorHandler(err);\n        callback({\n          data: [],\n          recordsFiltered: 0,\n        });\n      }).finally(() => {\n        searchInput.prop('readOnly', false);\n      });\n\n    this.searchFromLoading();\n  }\n\n  errorHandler(error) {\n    error = error.response.data;\n    if (error) {\n      const formEl = this.searchFormEl;\n\n      formEl.find('.validation-error').removeClass('has-error');\n      formEl.find('.form-group').removeClass('is-invalid');\n\n      for (const [key, value] of Object.entries(error.errors)) {\n        const nameKEy = key.substring(2);\n        let hasErrorSpan = formEl.find(`.validation-error[data-name=\"${nameKEy}\"]`);\n\n        if (!hasErrorSpan.length) {\n          hasErrorSpan = formEl.find(`.validation-error[data-name=\"${nameKEy}[]\"]`);\n        }\n\n        hasErrorSpan.closest('.form-group').addClass('is-invalid');\n        hasErrorSpan.html(value).addClass('has-error');\n      }\n    }\n  }\n\n  resetForm() {\n    this.searchFormEl.find('.validation-error').html('');\n    this.searchFormEl.find('.form-group').removeClass('is-invalid');\n  }\n\n  generateOptions() {\n    const moduleName = this.getCurrentModuleName();\n\n    const options = {\n      processing: true,\n      serverSide: true,\n      searching: true,\n      // searchDelay: 1000,\n      ajax: this.ajaxSend.bind(this),\n      order: [[0, 'desc']],\n      pageLength: 25,\n      columns: this.getAndGenerateColumns(),\n      bStateSave: true,\n      stateSaveCallback(oSettings, oData) {\n        const storeData = {};\n        if (oData.search) {\n          oData.search.search = '';\n        }\n\n        storeData[moduleName] = oData;\n\n        localStorage.setItem(SEARCH_DATATABLE_STATE_KEY, JSON.stringify(storeData));\n      },\n      language: {\n        search: '',\n        searchPlaceholder: $trans('__dashboard.datatable.search_input_placeholder'),\n      },\n    };\n\n    const savedDatatableState = JSON.parse(localStorage.getItem(SEARCH_DATATABLE_STATE_KEY));\n    if (savedDatatableState && savedDatatableState[moduleName]) {\n      options.stateLoadCallback = () => savedDatatableState[moduleName];\n    }\n\n    this.options = { ...options, ...this.options };\n  }\n\n  tableReload() {\n    this.table.ajax.reload();\n  }\n\n  eventListener() {\n    window.addEventListener('deleteDataTableRow', () => {\n      this.tableReload();\n    });\n  }\n\n  searchFromLoading(is) {\n    const searchFormBtn = this.searchFormEl.find('button.search__form__btn');\n    const searchFormResetBtn = this.searchFormEl.find('button.reset__form__btn');\n    const spinner = this.searchFormEl.find('.loading__form__icon');\n    if (is) {\n      spinner.addClass('d-inline-block ');\n      searchFormBtn.prop('disabled', true);\n      searchFormResetBtn.prop('disabled', true);\n    } else {\n      spinner.removeClass('d-inline-block');\n      searchFormBtn.prop('disabled', false);\n      searchFormResetBtn.prop('disabled', false);\n    }\n  }\n\n  searchFormReset() {\n    this.searchFormEl.find('.reset__form__btn').click(() => {\n      this.searchFromLoading(true);\n      this.searchData = {};\n      this.searchFormEl[0].reset();\n      this.table.search('');\n      this.clearSearchedDataFromLocalstorage();\n      this.searchFormEl.find('.select2').val(null).trigger('change');\n      this.tableReload();\n      this.getSearchCollapse().removeClass('has-default-values');\n    });\n  }\n\n  searchFormSubmit(event) {\n    event.preventDefault();\n    const el = event.target;\n    this.searchData = {};\n\n    this.searchFromLoading(true);\n    const searchData = $(el).serializeArray();\n\n    searchData.map((item, id) => {\n      let addArrayBrackets = '';\n      if ($(el).find(`select[name=\"${item.name}\"][multiple]`).length) {\n        addArrayBrackets = `[${id}]`;\n      }\n\n      this.searchData[`f[${item.name}]${addArrayBrackets}`] = item.value;\n    });\n\n    if (this.table.search().length) {\n      this.searchData['f[search]'] = this.table.search();\n    }\n\n    this.storeSearchedData();\n    this.tableReload();\n  }\n\n  storeSearchedData() {\n    if (this.storeSearchData()) {\n      const searchData = this.searchFormEl.serializeArray();\n      const searchDataValues = searchData.filter((item) => item.value !== '' || item.name === 'show_status');\n      const moduleName = this.getCurrentModuleName();\n\n      const storeData = {};\n     /* if (this.table.search()) {\n        searchDataValues.push({ name: 'search', value: this.table.search() });\n      }*/\n\n      storeData[moduleName] = searchDataValues;\n\n      localStorage.setItem(SEARCH_LOCALSTORAGE_KEY, JSON.stringify(storeData));\n\n      if (this.options.afterStoreSearchedData) {\n        this.options.afterStoreSearchedData(storeData);\n      }\n    }\n  }\n\n  setSearchStoredData() {\n    if (this.storeSearchData()) {\n      const localStoredData = JSON.parse(localStorage.getItem(SEARCH_LOCALSTORAGE_KEY));\n      const moduleName = this.getCurrentModuleName();\n\n      if (\n        localStoredData\n        && localStoredData[moduleName]\n        && localStoredData[moduleName].length\n      ) {\n        const self = this;\n        const storedData = localStoredData[moduleName];\n\n        // Collapse Show Part\n        let showCollapse = true;\n\n        if (storedData.length === 1 && $.inArray(storedData[0].name, ['search', 'show_status']) !== -1) {\n          showCollapse = false;\n        }\n\n        if (storedData.length === 2 && storedData[0].name === 'show_status' && storedData[1].name === 'search') {\n          showCollapse = false;\n        }\n\n        if (showCollapse) {\n          this.showSearchCollapse();\n        }\n\n        const storedDataModified = storedData.reduce((prev, current) => {\n          if (typeof prev[current.name] === 'undefined') {\n            prev[current.name] = current.value;\n          } else if (Array.isArray(prev[current.name])) {\n            prev[current.name].push(current.value);\n          } else {\n            prev[current.name] = [prev[current.name], current.value];\n          }\n          return prev;\n        }, {});\n\n        $.each(storedDataModified, (key, value) => {\n          const searchInput = self.searchFormEl.find(`:input[name='${key}']`);\n\n       /*   // Checkbox\n          if (searchInput.is(':checkbox')) {\n            searchInput.prop('checked', true);\n          }\n\n          // Date\n          if (searchInput.hasClass('backend-date-value')) {\n            const closestDiv = searchInput.closest('div');\n            if (closestDiv.find('.datepicker').length) {\n              closestDiv.find('.datepicker')\n                .val(moment(value, $dashboardDates.js.date_format)\n                  .format($dashboardDates.js.date_format_front));\n            }\n\n            if (closestDiv.find('.datetimepicker').length) {\n              closestDiv.find('.datetimepicker')\n                .val(moment(value, $dashboardDates.js.date_time_format)\n                  .format($dashboardDates.js.date_time_format_front));\n            }\n          }\n*/\n          //\n          let addArrayBrackets = '';\n          if (!Array.isArray(value) && searchInput.attr('multiple')) {\n            addArrayBrackets = '[]';\n          }\n\n          // Search Input of Datatable\n          /*if (key === 'search') {\n            setTimeout(function () {\n              $('.dataTables_filter').find('input').val(value);\n            }, 200);\n          }*/\n\n          //\n          // searchInput.val(value);\n          // self.searchData[`f[${key}]${addArrayBrackets}`] = value;\n        });\n\n        if (this.options.afterSetSearchStoredData) {\n          this.options.afterSetSearchStoredData(storedData);\n        }\n      }\n    }\n  }\n\n  getSearchCollapse() {\n    return this.searchFormEl.closest('.datatable-search-collapse')\n      .find('.collapse');\n  }\n\n  showSearchCollapse() {\n    this.getSearchCollapse()\n      .addClass('has-default-values show');\n  }\n\n  getCurrentModuleName() {\n    return location.pathname.split('/')[3];\n  }\n\n  clearSearchedDataFromLocalstorage() {\n    localStorage.removeItem(SEARCH_LOCALSTORAGE_KEY);\n    localStorage.removeItem(SEARCH_DATATABLE_STATE_KEY);\n  }\n\n  defaultSearchData() {\n    const self = this;\n    $.each(this.searchFormEl.find('.default-search'), (k, item) => {\n      self.searchData[`f[${$(item).attr('name')}]`] = $(item).val();\n    });\n  }\n\n  createDataTable() {\n    this.table = this.tableEl.DataTable(this.options);\n  }\n\n  defaultSearchInput() {\n    const self = this;\n    let timer;\n\n    this.getDefaultSearchInputField()\n      .unbind()\n      .bind('keyup input', function () {\n        clearTimeout(timer);\n        timer = setTimeout(() => {\n          self.searchData['f[search]'] = $(this).val();\n          self.table.search($(this).val());\n\n          self.tableReload();\n          self.storeSearchedData();\n        }, 330);\n      });\n  }\n\n  getDefaultSearchInputField() {\n    return $(`#${this.tableId.substring(1)}_filter`).find('input');\n  }\n\n  $_functions() {\n    this.createDataTable();\n    this.searchFormEl.submit(this.searchFormSubmit.bind(this));\n  }\n\n  init() {\n    this.actions();\n    this.defaultSearchData();\n    this.generateOptions();\n    this.eventListener();\n    this.$_functions();\n    this.searchFormReset();\n    this.defaultSearchInput();\n  }\n}\n"],"names":["SEARCH_LOCALSTORAGE_KEY","SEARCH_DATATABLE_STATE_KEY","exports","constructor","options","tableId","this","initVariables","setSearchStoredData","columnDefaultRender","init","tableEl","$","searchFormId","searchFormEl","searchData","pathOptions","showStatusRender","show_status","render","showStatus","$trans","columnsRender","storeSearchData","actions","replaceId","id","type","replace","self","defaultActions","edit","row","show","clone","clonePath","delete","canDelete","renderActions","data","meta","key","func","Object","entries","columnRenderRelation","column","columnName","relations","relationName","text","Array","isArray","relationKey","keys","map","item","index","relVal","actionsColumn","orderable","sortable","bind","mapTableColumns","columns","find","field","name","push","getAndGenerateColumns","noActions","generateRequestData","orderColumn","order","dir","perPage","length","start","ajaxSend","callback","resetForm","searchInput","getDefaultSearchInputField","val","trim","prop","axios","searchPath","params","then","resp","beforeSendRequest","catch","err","errorHandler","recordsFiltered","finally","searchFromLoading","error","response","formEl","removeClass","value","errors","nameKEy","substring","hasErrorSpan","closest","addClass","html","generateOptions","moduleName","getCurrentModuleName","processing","serverSide","searching","ajax","pageLength","bStateSave","stateSaveCallback","oSettings","oData","storeData","search","localStorage","setItem","JSON","stringify","language","searchPlaceholder","savedDatatableState","parse","getItem","stateLoadCallback","tableReload","table","reload","eventListener","window","addEventListener","is","searchFormBtn","searchFormResetBtn","spinner","searchFormReset","click","reset","clearSearchedDataFromLocalstorage","trigger","getSearchCollapse","searchFormSubmit","event","preventDefault","el","target","serializeArray","addArrayBrackets","storeSearchedData","searchDataValues","filter","afterStoreSearchedData","localStoredData","storedData","showCollapse","inArray","showSearchCollapse","storedDataModified","reduce","prev","current","each","attr","afterSetSearchStoredData","location","pathname","split","removeItem","defaultSearchData","k","createDataTable","DataTable","defaultSearchInput","timer","unbind","clearTimeout","setTimeout","$_functions","submit"],"mappings":"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"}